!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=function(){function t(t){this.value=t}return t.parseEmailStringsFromString=function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g).filter((function(t){return t.length>0})).map((function(e){return new t(e)}))},t.prototype.isValid=function(){return i.test(this.value)},t}();e.EmailString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),r=function(){function t(t,e){this.ownerDocument=t,this.model=e}return t.prototype.element=function(t){return i.element(this.ownerDocument,t)},t.prototype.getModel=function(){return this.model},t.prototype.getHtml=function(){return this.html},t.prototype.create=function(){return this.model.addObserver(this),this.html=this.createHtml(),this.update("*"),this},t.prototype.update=function(t){},t}();e.View=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(5),s=function(){function t(t,e){this.root=t,this.emailsList=new r.EmailStringList((e&&e.emails||[]).map((function(t){return new i.EmailString(t)}))),this.emailInputView=new o.EmailsInputView(t.ownerDocument,this.emailsList),this.onEmailsListChange=e&&e.onChange}return t.prototype.getEmails=function(){return this.emailsList.getEmails().map((function(t){return t.value}))},t.prototype.setEmails=function(t){this.emailsList.setEmails(t.map((function(t){return new i.EmailString(t)})))},t.prototype.addEmail=function(t){this.emailsList.addEmails([new i.EmailString(t)])},t.prototype.scrollToBottom=function(){this.emailInputView.scrollToBottom()},t.prototype.create=function(){return this.emailsList.addObserver(this),this.root.appendChild(this.emailInputView.create().getHtml()),this},t.prototype.update=function(t){"emails"===t&&this.onEmailsListChange&&this.onEmailsListChange(this.getEmails())},t}();e.EmailsInput=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.emails=e,n}return r(e,t),e.prototype.getEmails=function(){return this.emails},e.prototype.setEmails=function(t){this.emails=t,this.notifyObservers("emails")},e.prototype.removeEmail=function(t){this.setEmails(this.emails.filter((function(e){return e!==t})))},e.prototype.addEmails=function(t){this.setEmails(this.emails.concat(t))},e}(n(4).Observable);e.EmailStringList=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.observers=[]}return t.prototype.addObserver=function(t){this.observers.push(t)},t.prototype.removeObserver=function(t){this.observers=this.observers.filter((function(e){return e!==t}))},t.prototype.hasObserver=function(t){return this.observers.includes(t)},t.prototype.notifyObservers=function(t){this.observers.slice(0).forEach((function(e){return e.update(t)}))},t}();e.Observable=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),s=n(0),a=n(7);n(9);var l=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.emailStringListView=new a.EmailStringListView(e,n),i}return r(e,t),e.prototype.scrollToBottom=function(){this.html.scrollTop=this.html.scrollHeight},e.prototype.updateInputWidth=function(){this.input.value?this.input.scrollWidth>this.input.offsetWidth&&(this.input.style.width=this.input.scrollWidth+"px"):this.input.style.width=""},e.prototype.addEmailsFromString=function(t,e){var n=s.EmailString.parseEmailStringsFromString(t);n.length>0&&(this.getModel().addEmails(n),e&&(this.input.value=this.input.value.substr(t.length).replace(/^\s+/,""),this.input.setSelectionRange(0,0),this.updateInputWidth()))},e.prototype.handleInputBlurEvent=function(){this.addEmailsFromString(this.input.value,!0)},e.prototype.handleInputPasteEvent=function(t){this.addEmailsFromString(function(t){return t.clipboardData?t.clipboardData.getData("text/plain"):window.clipboardData.getData("Text")}(t),!1),this.scrollToBottom(),t.preventDefault()},e.prototype.handleInputKeyDownEvent=function(t){"Enter"===t.key&&this.addEmailsFromString(this.input.value,!0)},e.prototype.handleInputKeyUpEvent=function(t){if(","===t.key){var e=this.input.value.lastIndexOf(",");-1!==e&&this.addEmailsFromString(this.input.value.substr(0,e+1),!0)}},e.prototype.handleInputTextInputEvent=function(){this.updateInputWidth()},e.prototype.handleDragEvent=function(t){t.preventDefault()},e.prototype.handleDropEvent=function(t){this.addEmailsFromString(function(t){try{return t.dataTransfer.getData("Text")||t.dataTransfer.getData("text/plain")}catch(t){return""}}(t),!1),this.scrollToBottom(),t.preventDefault()},e.prototype.handleClickEvent=function(){event.target===this.getHtml()&&this.input.focus()},e.prototype.createHtml=function(){var t=this;return this.input=this.element({name:"input",classes:["emails-input__control"],listeners:{blur:function(){return t.handleInputBlurEvent()},paste:function(e){return t.handleInputPasteEvent(e)},keydown:function(e){return t.handleInputKeyDownEvent(e)},keyup:function(e){return t.handleInputKeyUpEvent(e)},input:function(){return t.handleInputTextInputEvent()}}}),this.element({name:"div",classes:["emails-input"],children:[this.emailStringListView.create().getHtml(),this.input],listeners:{dragenter:function(e){return t.handleDragEvent(e)},dragover:function(e){return t.handleDragEvent(e)},drop:function(e){return t.handleDropEvent(e)},click:function(){return t.handleClickEvent()}}})},e}(o.View);e.EmailsInputView=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.element=function(t,e){var n=t.createElement(e.name);if(n.className=e.classes?e.classes.join(" "):"",n.textContent=e.text||"",e.role&&n.setAttribute("role",e.role),e.children&&e.children.forEach((function(t){return n.appendChild(t)})),e.listeners)for(var i in e.listeners)e.listeners.hasOwnProperty(i)&&n.addEventListener(i,e.listeners[i]);return n}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);n(8);var s=function(t){function e(e,n){return t.call(this,e,n)||this}return r(e,t),e.prototype.createEmailHtml=function(t){var e=this;return this.element({name:"span",classes:["email-string-list__email-block","email-string-list__email-block-"+(t.isValid()?"valid":"invalid")],children:[this.element({name:"span",classes:["email-string-list__email-label"],text:t.value}),this.element({name:"span",classes:["email-string-list__email-remove-button"],text:"Ã—",listeners:{click:function(n){return e.getModel().removeEmail(t)}}})]})},e.prototype.createHtml=function(){return this.element({name:"span",classes:["email-string-list"]})},e.prototype.update=function(e){var n=this;if("emails"===e||"*"===e){for(;this.getHtml().firstChild;)this.getHtml().removeChild(this.getHtml().firstChild);this.getModel().getEmails().forEach((function(t){return n.getHtml().appendChild(n.createEmailHtml(t))}))}t.prototype.update.call(this,e)},e}(o.View);e.EmailStringListView=s},function(t,e,n){},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);n(12);var r=document.getElementById("emails-count");r.textContent="2";var o=new i.EmailsInput(document.getElementById("email-input"),{emails:["bla@bla.com","invalid.com"],onChange:function(t){r.textContent=String(t.length)}}).create(),s=["bob","rob","john","steve","jane","anna"],a=["apple","facebook","google","linkedin"],l=["com","org","net","nl","ru","ua"];function u(t){return t[Math.round(Math.random()*(t.length-1))]}document.getElementById("add-email").addEventListener("click",(function(){o.addEmail(u(s)+"@"+u(a)+"."+u(l)),o.scrollToBottom()})),document.getElementById("get-emails-count").addEventListener("click",(function(){alert(o.getEmails().length+" emails entered!")}))},function(t,e,n){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL0VtYWlsU3RyaW5nLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L1ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VtYWlsc0lucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9FbWFpbFN0cmluZ0xpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL09ic2VydmFibGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcvRW1haWxzSW5wdXRWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L2VsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcvRW1haWxTdHJpbmdMaXN0Vmlldy50cyIsIndlYnBhY2s6Ly8vLi9zYW1wbGVzL2RlZmF1bHQvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJFTUFJTF9SRUdFWFAiLCJFbWFpbFN0cmluZyIsInRoaXMiLCJwYXJzZUVtYWlsU3RyaW5nc0Zyb21TdHJpbmciLCJlbWFpbHNTdHJpbmciLCJyZXBsYWNlIiwic3BsaXQiLCJmaWx0ZXIiLCJpdGVtIiwibGVuZ3RoIiwibWFwIiwiaXNWYWxpZCIsInRlc3QiLCJlbGVtZW50XzEiLCJWaWV3Iiwib3duZXJEb2N1bWVudCIsIm1vZGVsIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJnZXRNb2RlbCIsImdldEh0bWwiLCJodG1sIiwiYWRkT2JzZXJ2ZXIiLCJjcmVhdGVIdG1sIiwidXBkYXRlIiwiRW1haWxTdHJpbmdfMSIsIkVtYWlsU3RyaW5nTGlzdF8xIiwiRW1haWxzSW5wdXRWaWV3XzEiLCJFbWFpbHNJbnB1dCIsInJvb3QiLCJlbWFpbHNMaXN0IiwiRW1haWxTdHJpbmdMaXN0IiwiZW1haWxzIiwiZW1haWwiLCJlbWFpbElucHV0VmlldyIsIkVtYWlsc0lucHV0VmlldyIsIm9uRW1haWxzTGlzdENoYW5nZSIsIm9uQ2hhbmdlIiwiZ2V0RW1haWxzIiwic2V0RW1haWxzIiwiYWRkRW1haWwiLCJhZGRFbWFpbHMiLCJzY3JvbGxUb0JvdHRvbSIsImFwcGVuZENoaWxkIiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiX18iLCJjb25zdHJ1Y3RvciIsIl9zdXBlciIsIl90aGlzIiwibm90aWZ5T2JzZXJ2ZXJzIiwicmVtb3ZlRW1haWwiLCJjb25jYXQiLCJPYnNlcnZhYmxlIiwib2JzZXJ2ZXJzIiwib2JzZXJ2ZXIiLCJwdXNoIiwicmVtb3ZlT2JzZXJ2ZXIiLCJoYXNPYnNlcnZlciIsImluY2x1ZGVzIiwic2xpY2UiLCJmb3JFYWNoIiwiVmlld18xIiwiRW1haWxTdHJpbmdMaXN0Vmlld18xIiwiZW1haWxTdHJpbmdMaXN0VmlldyIsIkVtYWlsU3RyaW5nTGlzdFZpZXciLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJ1cGRhdGVJbnB1dFdpZHRoIiwiaW5wdXQiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwic3R5bGUiLCJ3aWR0aCIsImFkZEVtYWlsc0Zyb21TdHJpbmciLCJyZXNldElucHV0Iiwic3Vic3RyIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJoYW5kbGVJbnB1dEJsdXJFdmVudCIsImhhbmRsZUlucHV0UGFzdGVFdmVudCIsImV2ZW50IiwiY2xpcGJvYXJkRGF0YSIsImdldERhdGEiLCJ3aW5kb3ciLCJnZXRDbGlwYm9hcmREYXRhIiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVJbnB1dEtleURvd25FdmVudCIsImhhbmRsZUlucHV0S2V5VXBFdmVudCIsImxhc3RDb21hSW5kZXgiLCJsYXN0SW5kZXhPZiIsImhhbmRsZUlucHV0VGV4dElucHV0RXZlbnQiLCJoYW5kbGVEcmFnRXZlbnQiLCJoYW5kbGVEcm9wRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJlcnJvciIsImdldERyb3BEYXRhIiwiaGFuZGxlQ2xpY2tFdmVudCIsInRhcmdldCIsImZvY3VzIiwiY2xhc3NlcyIsImxpc3RlbmVycyIsImJsdXIiLCJwYXN0ZSIsImtleWRvd24iLCJrZXl1cCIsImNoaWxkcmVuIiwiZHJhZ2VudGVyIiwiZHJhZ292ZXIiLCJkcm9wIiwiY2xpY2siLCJyZXN1bHQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiam9pbiIsInRleHRDb250ZW50IiwidGV4dCIsInJvbGUiLCJzZXRBdHRyaWJ1dGUiLCJjaGlsZCIsImxpc3RlbmVyTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjcmVhdGVFbWFpbEh0bWwiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJFbWFpbHNJbnB1dF8xIiwiZW1haWxzQ291bnRMYWJlbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJlbWFpbHNJbnB1dCIsIlN0cmluZyIsInNhbXBsZU5hbWVzIiwic2FtcGxlU3ViZG9tYWlucyIsInNhbXBsZVJvb3REb21haW5zIiwicGlja1JhbmRvbSIsImxpc3QiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJhbGVydCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJF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LG9CQUFzQkEsRyxrRUNoRTlCM0YsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLElBQ3RELElBQUkrSSxFQUFnQixFQUFRLEdBQzVCLEVBQVEsSUFDUixJQUFJQyxFQUFtQkMsU0FBU0MsZUFBZSxnQkFDL0NGLEVBQWlCWCxZQUFjLElBQy9CLElBQUljLEVBQWMsSUFBSUosRUFBY3BHLFlBQVlzRyxTQUFTQyxlQUFlLGVBQWdCLENBQ3BGbkcsT0FBUSxDQUFDLGNBQWUsZUFDeEJLLFNBQVUsU0FBVUwsR0FDaEJpRyxFQUFpQlgsWUFBY2UsT0FBT3JHLEVBQU92QixXQUdoRG5CLFNBQ0RnSixFQUFjLENBQUMsTUFBTyxNQUFPLE9BQVEsUUFBUyxPQUFRLFFBQ3REQyxFQUFtQixDQUFDLFFBQVMsV0FBWSxTQUFVLFlBQ25EQyxFQUFvQixDQUFDLE1BQU8sTUFBTyxNQUFPLEtBQU0sS0FBTSxNQUMxRCxTQUFTQyxFQUFXQyxHQUNoQixPQUFPQSxFQUFLQyxLQUFLQyxNQUFNRCxLQUFLRSxVQUFZSCxFQUFLakksT0FBUyxLQUUxRHlILFNBQVNDLGVBQWUsYUFBYVAsaUJBQWlCLFNBQVMsV0FDM0RRLEVBQVk1RixTQUFTaUcsRUFBV0gsR0FBZSxJQUFNRyxFQUFXRixHQUFvQixJQUFNRSxFQUFXRCxJQUNyR0osRUFBWTFGLG9CQUVoQndGLFNBQVNDLGVBQWUsb0JBQW9CUCxpQkFBaUIsU0FBUyxXQUNsRWtCLE1BQU1WLEVBQVk5RixZQUFZN0IsT0FBUyx3QiIsImZpbGUiOiJkZWZhdWx0LXNhbXBsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFTUFJTF9SRUdFWFAgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbnZhciBFbWFpbFN0cmluZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbWFpbFN0cmluZyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIEVtYWlsU3RyaW5nLnBhcnNlRW1haWxTdHJpbmdzRnJvbVN0cmluZyA9IGZ1bmN0aW9uIChlbWFpbHNTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGVtYWlsc1N0cmluZ1xuICAgICAgICAgICAgLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxuICAgICAgICAgICAgLnNwbGl0KC9cXHMqLFxccyovZylcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ubGVuZ3RoID4gMDsgfSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIG5ldyBFbWFpbFN0cmluZyhpdGVtKTsgfSk7XG4gICAgfTtcbiAgICBFbWFpbFN0cmluZy5wcm90b3R5cGUuaXNWYWxpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEVNQUlMX1JFR0VYUC50ZXN0KHRoaXMudmFsdWUpO1xuICAgIH07XG4gICAgcmV0dXJuIEVtYWlsU3RyaW5nO1xufSgpKTtcbmV4cG9ydHMuRW1haWxTdHJpbmcgPSBFbWFpbFN0cmluZztcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGVsZW1lbnRfMSA9IHJlcXVpcmUoXCJAL3ZpZXcvZWxlbWVudFwiKTtcbnZhciBWaWV3ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZpZXcob3duZXJEb2N1bWVudCwgbW9kZWwpIHtcbiAgICAgICAgdGhpcy5vd25lckRvY3VtZW50ID0gb3duZXJEb2N1bWVudDtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgIH1cbiAgICBWaWV3LnByb3RvdHlwZS5lbGVtZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRfMS5lbGVtZW50KHRoaXMub3duZXJEb2N1bWVudCwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kZWw7XG4gICAgfTtcbiAgICBWaWV3LnByb3RvdHlwZS5nZXRIdG1sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5odG1sO1xuICAgIH07XG4gICAgVmlldy5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1vZGVsLmFkZE9ic2VydmVyKHRoaXMpO1xuICAgICAgICB0aGlzLmh0bWwgPSB0aGlzLmNyZWF0ZUh0bWwoKTtcbiAgICAgICAgdGhpcy51cGRhdGUoJyonKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBWaWV3LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICB9O1xuICAgIHJldHVybiBWaWV3O1xufSgpKTtcbmV4cG9ydHMuVmlldyA9IFZpZXc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFbWFpbFN0cmluZ18xID0gcmVxdWlyZShcIkAvbW9kZWwvRW1haWxTdHJpbmdcIik7XG52YXIgRW1haWxTdHJpbmdMaXN0XzEgPSByZXF1aXJlKFwiQC9tb2RlbC9FbWFpbFN0cmluZ0xpc3RcIik7XG52YXIgRW1haWxzSW5wdXRWaWV3XzEgPSByZXF1aXJlKFwiQC92aWV3L0VtYWlsc0lucHV0Vmlld1wiKTtcbnZhciBFbWFpbHNJbnB1dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbWFpbHNJbnB1dChyb290LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XG4gICAgICAgIHRoaXMuZW1haWxzTGlzdCA9IG5ldyBFbWFpbFN0cmluZ0xpc3RfMS5FbWFpbFN0cmluZ0xpc3QoKG9wdGlvbnMgJiYgb3B0aW9ucy5lbWFpbHMgfHwgW10pLm1hcChmdW5jdGlvbiAoZW1haWwpIHsgcmV0dXJuIG5ldyBFbWFpbFN0cmluZ18xLkVtYWlsU3RyaW5nKGVtYWlsKTsgfSkpO1xuICAgICAgICB0aGlzLmVtYWlsSW5wdXRWaWV3ID0gbmV3IEVtYWlsc0lucHV0Vmlld18xLkVtYWlsc0lucHV0Vmlldyhyb290Lm93bmVyRG9jdW1lbnQsIHRoaXMuZW1haWxzTGlzdCk7XG4gICAgICAgIHRoaXMub25FbWFpbHNMaXN0Q2hhbmdlID0gb3B0aW9ucyAmJiBvcHRpb25zLm9uQ2hhbmdlO1xuICAgIH1cbiAgICBFbWFpbHNJbnB1dC5wcm90b3R5cGUuZ2V0RW1haWxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbWFpbHNMaXN0LmdldEVtYWlscygpLm1hcChmdW5jdGlvbiAoZW1haWwpIHsgcmV0dXJuIGVtYWlsLnZhbHVlOyB9KTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0LnByb3RvdHlwZS5zZXRFbWFpbHMgPSBmdW5jdGlvbiAoZW1haWxzKSB7XG4gICAgICAgIHRoaXMuZW1haWxzTGlzdC5zZXRFbWFpbHMoZW1haWxzLm1hcChmdW5jdGlvbiAoZW1haWwpIHsgcmV0dXJuIG5ldyBFbWFpbFN0cmluZ18xLkVtYWlsU3RyaW5nKGVtYWlsKTsgfSkpO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXQucHJvdG90eXBlLmFkZEVtYWlsID0gZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgICAgIHRoaXMuZW1haWxzTGlzdC5hZGRFbWFpbHMoW25ldyBFbWFpbFN0cmluZ18xLkVtYWlsU3RyaW5nKGVtYWlsKV0pO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXQucHJvdG90eXBlLnNjcm9sbFRvQm90dG9tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtYWlsSW5wdXRWaWV3LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtYWlsc0xpc3QuYWRkT2JzZXJ2ZXIodGhpcyk7XG4gICAgICAgIHRoaXMucm9vdC5hcHBlbmRDaGlsZCh0aGlzLmVtYWlsSW5wdXRWaWV3LmNyZWF0ZSgpLmdldEh0bWwoKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICBpZiAocHJvcGVydHkgPT09ICdlbWFpbHMnICYmIHRoaXMub25FbWFpbHNMaXN0Q2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLm9uRW1haWxzTGlzdENoYW5nZSh0aGlzLmdldEVtYWlscygpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEVtYWlsc0lucHV0O1xufSgpKTtcbmV4cG9ydHMuRW1haWxzSW5wdXQgPSBFbWFpbHNJbnB1dDtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZShcIkAvbW9kZWwvT2JzZXJ2YWJsZVwiKTtcbnZhciBFbWFpbFN0cmluZ0xpc3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtYWlsU3RyaW5nTGlzdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbWFpbFN0cmluZ0xpc3QoZW1haWxzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmVtYWlscyA9IGVtYWlscztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBFbWFpbFN0cmluZ0xpc3QucHJvdG90eXBlLmdldEVtYWlscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1haWxzO1xuICAgIH07XG4gICAgRW1haWxTdHJpbmdMaXN0LnByb3RvdHlwZS5zZXRFbWFpbHMgPSBmdW5jdGlvbiAoZW1haWxzKSB7XG4gICAgICAgIHRoaXMuZW1haWxzID0gZW1haWxzO1xuICAgICAgICB0aGlzLm5vdGlmeU9ic2VydmVycygnZW1haWxzJyk7XG4gICAgfTtcbiAgICBFbWFpbFN0cmluZ0xpc3QucHJvdG90eXBlLnJlbW92ZUVtYWlsID0gZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgICAgIHRoaXMuc2V0RW1haWxzKHRoaXMuZW1haWxzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbSAhPT0gZW1haWw7IH0pKTtcbiAgICB9O1xuICAgIEVtYWlsU3RyaW5nTGlzdC5wcm90b3R5cGUuYWRkRW1haWxzID0gZnVuY3Rpb24gKGVtYWlscykge1xuICAgICAgICB0aGlzLnNldEVtYWlscyh0aGlzLmVtYWlscy5jb25jYXQoZW1haWxzKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRW1haWxTdHJpbmdMaXN0O1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5FbWFpbFN0cmluZ0xpc3QgPSBFbWFpbFN0cmluZ0xpc3Q7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBPYnNlcnZhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgfVxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmFkZE9ic2VydmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVtb3ZlT2JzZXJ2ZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0gIT09IG9ic2VydmVyOyB9KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmhhc09ic2VydmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5pbmNsdWRlcyhvYnNlcnZlcik7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5ub3RpZnlPYnNlcnZlcnMgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMuc2xpY2UoMCkuZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIG9ic2VydmVyLnVwZGF0ZShwcm9wZXJ0eSk7IH0pO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG59KCkpO1xuZXhwb3J0cy5PYnNlcnZhYmxlID0gT2JzZXJ2YWJsZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmlld18xID0gcmVxdWlyZShcIkAvdmlldy9WaWV3XCIpO1xudmFyIEVtYWlsU3RyaW5nXzEgPSByZXF1aXJlKFwiQC9tb2RlbC9FbWFpbFN0cmluZ1wiKTtcbnZhciBFbWFpbFN0cmluZ0xpc3RWaWV3XzEgPSByZXF1aXJlKFwiQC92aWV3L0VtYWlsU3RyaW5nTGlzdFZpZXdcIik7XG5yZXF1aXJlKFwiQC92aWV3L0VtYWlsc0lucHV0Vmlldy5zY3NzXCIpO1xuZnVuY3Rpb24gZ2V0Q2xpcGJvYXJkRGF0YShldmVudCkge1xuICAgIGlmIChldmVudC5jbGlwYm9hcmREYXRhKSB7XG4gICAgICAgIHJldHVybiBldmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdUZXh0Jyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RHJvcERhdGEoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ1RleHQnKSB8fCBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSUUgY2FuIHRocm93IGV4Y2VwdGlvbiBmb3IgJ3RleHQvcGxhaW4nIGFjY29yZGluZyB0byBzdGFjayBvdmVyZmxvd1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxudmFyIEVtYWlsc0lucHV0VmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1haWxzSW5wdXRWaWV3LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtYWlsc0lucHV0Vmlldyhvd25lckRvY3VtZW50LCBtb2RlbCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvd25lckRvY3VtZW50LCBtb2RlbCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZW1haWxTdHJpbmdMaXN0VmlldyA9IG5ldyBFbWFpbFN0cmluZ0xpc3RWaWV3XzEuRW1haWxTdHJpbmdMaXN0Vmlldyhvd25lckRvY3VtZW50LCBtb2RlbCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5zY3JvbGxUb0JvdHRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5odG1sLnNjcm9sbFRvcCA9IHRoaXMuaHRtbC5zY3JvbGxIZWlnaHQ7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLnVwZGF0ZUlucHV0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlucHV0LnZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dC5zY3JvbGxXaWR0aCA+IHRoaXMuaW5wdXQub2Zmc2V0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0LnN0eWxlLndpZHRoID0gdGhpcy5pbnB1dC5zY3JvbGxXaWR0aCArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuYWRkRW1haWxzRnJvbVN0cmluZyA9IGZ1bmN0aW9uIChlbWFpbHNTdHJpbmcsIHJlc2V0SW5wdXQpIHtcbiAgICAgICAgdmFyIGVtYWlscyA9IEVtYWlsU3RyaW5nXzEuRW1haWxTdHJpbmcucGFyc2VFbWFpbFN0cmluZ3NGcm9tU3RyaW5nKGVtYWlsc1N0cmluZyk7XG4gICAgICAgIGlmIChlbWFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5nZXRNb2RlbCgpLmFkZEVtYWlscyhlbWFpbHMpO1xuICAgICAgICAgICAgaWYgKHJlc2V0SW5wdXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0LnZhbHVlID0gdGhpcy5pbnB1dC52YWx1ZS5zdWJzdHIoZW1haWxzU3RyaW5nLmxlbmd0aCkucmVwbGFjZSgvXlxccysvLCAnJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0V2lkdGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5oYW5kbGVJbnB1dEJsdXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hZGRFbWFpbHNGcm9tU3RyaW5nKHRoaXMuaW5wdXQudmFsdWUsIHRydWUpO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5oYW5kbGVJbnB1dFBhc3RlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5hZGRFbWFpbHNGcm9tU3RyaW5nKGdldENsaXBib2FyZERhdGEoZXZlbnQpLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuaGFuZGxlSW5wdXRLZXlEb3duRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgdGhpcy5hZGRFbWFpbHNGcm9tU3RyaW5nKHRoaXMuaW5wdXQudmFsdWUsIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmhhbmRsZUlucHV0S2V5VXBFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnLCcpIHtcbiAgICAgICAgICAgIHZhciBsYXN0Q29tYUluZGV4ID0gdGhpcy5pbnB1dC52YWx1ZS5sYXN0SW5kZXhPZignLCcpO1xuICAgICAgICAgICAgaWYgKGxhc3RDb21hSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRFbWFpbHNGcm9tU3RyaW5nKHRoaXMuaW5wdXQudmFsdWUuc3Vic3RyKDAsIGxhc3RDb21hSW5kZXggKyAxKSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuaGFuZGxlSW5wdXRUZXh0SW5wdXRFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVJbnB1dFdpZHRoKCk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5oYW5kbGVEcm9wRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5hZGRFbWFpbHNGcm9tU3RyaW5nKGdldERyb3BEYXRhKGV2ZW50KSwgZmFsc2UpO1xuICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmhhbmRsZUNsaWNrRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMuZ2V0SHRtbCgpKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuY3JlYXRlSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5pbnB1dCA9IHRoaXMuZWxlbWVudCh7XG4gICAgICAgICAgICBuYW1lOiAnaW5wdXQnLFxuICAgICAgICAgICAgY2xhc3NlczogWydlbWFpbHMtaW5wdXRfX2NvbnRyb2wnXSxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUlucHV0Qmx1ckV2ZW50KCk7IH0sXG4gICAgICAgICAgICAgICAgcGFzdGU6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlSW5wdXRQYXN0ZUV2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUlucHV0S2V5RG93bkV2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVJbnB1dEtleVVwRXZlbnQoZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVJbnB1dFRleHRJbnB1dEV2ZW50KCk7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQoe1xuICAgICAgICAgICAgbmFtZTogJ2RpdicsXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2VtYWlscy1pbnB1dCddLFxuICAgICAgICAgICAgY2hpbGRyZW46IFt0aGlzLmVtYWlsU3RyaW5nTGlzdFZpZXcuY3JlYXRlKCkuZ2V0SHRtbCgpLCB0aGlzLmlucHV0XSxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgICAgICAgIGRyYWdlbnRlcjogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVEcmFnRXZlbnQoZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgIGRyYWdvdmVyOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZURyYWdFdmVudChldmVudCk7IH0sXG4gICAgICAgICAgICAgICAgZHJvcDogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVEcm9wRXZlbnQoZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVDbGlja0V2ZW50KCk7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gRW1haWxzSW5wdXRWaWV3O1xufShWaWV3XzEuVmlldykpO1xuZXhwb3J0cy5FbWFpbHNJbnB1dFZpZXcgPSBFbWFpbHNJbnB1dFZpZXc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIGVsZW1lbnQob3duZXJEb2N1bWVudCwgb3B0aW9ucykge1xuICAgIHZhciByZXN1bHQgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQob3B0aW9ucy5uYW1lKTtcbiAgICByZXN1bHQuY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc2VzID8gb3B0aW9ucy5jbGFzc2VzLmpvaW4oJyAnKSA6ICcnO1xuICAgIHJlc3VsdC50ZXh0Q29udGVudCA9IG9wdGlvbnMudGV4dCB8fCAnJztcbiAgICBpZiAob3B0aW9ucy5yb2xlKSB7XG4gICAgICAgIHJlc3VsdC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCBvcHRpb25zLnJvbGUpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5jaGlsZHJlbikge1xuICAgICAgICBvcHRpb25zLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7IHJldHVybiByZXN1bHQuYXBwZW5kQ2hpbGQoY2hpbGQpOyB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubGlzdGVuZXJzKSB7XG4gICAgICAgIGZvciAodmFyIGxpc3RlbmVyTmFtZSBpbiBvcHRpb25zLmxpc3RlbmVycykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGlzdGVuZXJzLmhhc093blByb3BlcnR5KGxpc3RlbmVyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuYWRkRXZlbnRMaXN0ZW5lcihsaXN0ZW5lck5hbWUsIG9wdGlvbnMubGlzdGVuZXJzW2xpc3RlbmVyTmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnRzLmVsZW1lbnQgPSBlbGVtZW50O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWaWV3XzEgPSByZXF1aXJlKFwiQC92aWV3L1ZpZXdcIik7XG5yZXF1aXJlKFwiQC92aWV3L0VtYWlsU3RyaW5nTGlzdFZpZXcuc2Nzc1wiKTtcbnZhciBFbWFpbFN0cmluZ0xpc3RWaWV3ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFbWFpbFN0cmluZ0xpc3RWaWV3LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtYWlsU3RyaW5nTGlzdFZpZXcob3duZXJEb2N1bWVudCwgZW1haWxzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvd25lckRvY3VtZW50LCBlbWFpbHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIEVtYWlsU3RyaW5nTGlzdFZpZXcucHJvdG90eXBlLmNyZWF0ZUVtYWlsSHRtbCA9IGZ1bmN0aW9uIChlbWFpbCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50KHtcbiAgICAgICAgICAgIG5hbWU6ICdzcGFuJyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFtcbiAgICAgICAgICAgICAgICAnZW1haWwtc3RyaW5nLWxpc3RfX2VtYWlsLWJsb2NrJyxcbiAgICAgICAgICAgICAgICBcImVtYWlsLXN0cmluZy1saXN0X19lbWFpbC1ibG9jay1cIiArIChlbWFpbC5pc1ZhbGlkKCkgPyAndmFsaWQnIDogJ2ludmFsaWQnKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbJ2VtYWlsLXN0cmluZy1saXN0X19lbWFpbC1sYWJlbCddLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBlbWFpbC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWydlbWFpbC1zdHJpbmctbGlzdF9fZW1haWwtcmVtb3ZlLWJ1dHRvbiddLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnw5cnLFxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuZ2V0TW9kZWwoKS5yZW1vdmVFbWFpbChlbWFpbCk7IH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgRW1haWxTdHJpbmdMaXN0Vmlldy5wcm90b3R5cGUuY3JlYXRlSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudCh7XG4gICAgICAgICAgICBuYW1lOiAnc3BhbicsXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2VtYWlsLXN0cmluZy1saXN0J11cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBFbWFpbFN0cmluZ0xpc3RWaWV3LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHByb3BlcnR5ID09PSAnZW1haWxzJyB8fCBwcm9wZXJ0eSA9PT0gJyonKSB7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5nZXRIdG1sKCkuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SHRtbCgpLnJlbW92ZUNoaWxkKHRoaXMuZ2V0SHRtbCgpLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nZXRNb2RlbCgpLmdldEVtYWlscygpLmZvckVhY2goZnVuY3Rpb24gKGVtYWlsKSB7IHJldHVybiBfdGhpcy5nZXRIdG1sKCkuYXBwZW5kQ2hpbGQoX3RoaXMuY3JlYXRlRW1haWxIdG1sKGVtYWlsKSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcywgcHJvcGVydHkpO1xuICAgIH07XG4gICAgcmV0dXJuIEVtYWlsU3RyaW5nTGlzdFZpZXc7XG59KFZpZXdfMS5WaWV3KSk7XG5leHBvcnRzLkVtYWlsU3RyaW5nTGlzdFZpZXcgPSBFbWFpbFN0cmluZ0xpc3RWaWV3O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRW1haWxzSW5wdXRfMSA9IHJlcXVpcmUoXCJAL0VtYWlsc0lucHV0XCIpO1xucmVxdWlyZShcIi4vaW5kZXguc2Nzc1wiKTtcbnZhciBlbWFpbHNDb3VudExhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlscy1jb3VudCcpO1xuZW1haWxzQ291bnRMYWJlbC50ZXh0Q29udGVudCA9ICcyJztcbnZhciBlbWFpbHNJbnB1dCA9IG5ldyBFbWFpbHNJbnB1dF8xLkVtYWlsc0lucHV0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbC1pbnB1dCcpLCB7XG4gICAgZW1haWxzOiBbJ2JsYUBibGEuY29tJywgJ2ludmFsaWQuY29tJ10sXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIChlbWFpbHMpIHtcbiAgICAgICAgZW1haWxzQ291bnRMYWJlbC50ZXh0Q29udGVudCA9IFN0cmluZyhlbWFpbHMubGVuZ3RoKTtcbiAgICB9XG59KVxuICAgIC5jcmVhdGUoKTtcbnZhciBzYW1wbGVOYW1lcyA9IFsnYm9iJywgJ3JvYicsICdqb2huJywgJ3N0ZXZlJywgJ2phbmUnLCAnYW5uYSddO1xudmFyIHNhbXBsZVN1YmRvbWFpbnMgPSBbJ2FwcGxlJywgJ2ZhY2Vib29rJywgJ2dvb2dsZScsICdsaW5rZWRpbiddO1xudmFyIHNhbXBsZVJvb3REb21haW5zID0gWydjb20nLCAnb3JnJywgJ25ldCcsICdubCcsICdydScsICd1YSddO1xuZnVuY3Rpb24gcGlja1JhbmRvbShsaXN0KSB7XG4gICAgcmV0dXJuIGxpc3RbTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGxpc3QubGVuZ3RoIC0gMSkpXTtcbn1cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZW1haWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBlbWFpbHNJbnB1dC5hZGRFbWFpbChwaWNrUmFuZG9tKHNhbXBsZU5hbWVzKSArIFwiQFwiICsgcGlja1JhbmRvbShzYW1wbGVTdWJkb21haW5zKSArIFwiLlwiICsgcGlja1JhbmRvbShzYW1wbGVSb290RG9tYWlucykpO1xuICAgIGVtYWlsc0lucHV0LnNjcm9sbFRvQm90dG9tKCk7XG59KTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZXQtZW1haWxzLWNvdW50JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgYWxlcnQoZW1haWxzSW5wdXQuZ2V0RW1haWxzKCkubGVuZ3RoICsgXCIgZW1haWxzIGVudGVyZWQhXCIpO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9