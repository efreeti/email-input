!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=function(){function t(t){this.value=t}return t.parseEmailStringsFromString=function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g).filter((function(t){return t.length>0})).map((function(e){return new t(e)}))},t.prototype.isValid=function(){return i.test(this.value)},t}();e.EmailString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=function(){function t(t,e){this.ownerDocument=t,this.model=e}return t.prototype.element=function(t){return i.element(this.ownerDocument,t)},t.prototype.getModel=function(){return this.model},t.prototype.getHtml=function(){return this.html},t.prototype.create=function(){return this.model.addObserver(this),this.html=this.createHtml(),this.update("*"),this},t.prototype.update=function(t){},t}();e.View=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(5),s=function(){function t(t,e){this.root=t,this.emailsList=new r.EmailStringList((e&&e.emails||[]).map((function(t){return new i.EmailString(t)}))),this.emailInputView=new o.EmailsInputView(t.ownerDocument,this.emailsList),this.onEmailsListChange=e&&e.onChange}return t.prototype.getEmails=function(){return this.emailsList.getEmails().map((function(t){return t.value}))},t.prototype.setEmails=function(t){this.emailsList.setEmails(t.map((function(t){return new i.EmailString(t)})))},t.prototype.addEmail=function(t){this.emailsList.addEmails([new i.EmailString(t)])},t.prototype.scrollToBottom=function(){this.emailInputView.scrollToBottom()},t.prototype.create=function(){return this.emailsList.addObserver(this),this.root.appendChild(this.emailInputView.create().getHtml()),this},t.prototype.update=function(t){"emails"===t&&this.onEmailsListChange&&this.onEmailsListChange(this.getEmails())},t}();e.EmailsInput=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.emails=e,n}return r(e,t),e.prototype.getEmails=function(){return this.emails},e.prototype.setEmails=function(t){this.emails=t,this.notifyObservers("emails")},e.prototype.removeEmail=function(t){this.setEmails(this.emails.filter((function(e){return e!==t})))},e.prototype.addEmails=function(t){this.setEmails(this.emails.concat(t))},e}(n(4).Observable);e.EmailStringList=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.observers=[]}return t.prototype.addObserver=function(t){this.observers.push(t)},t.prototype.removeObserver=function(t){this.observers=this.observers.filter((function(e){return e!==t}))},t.prototype.hasObserver=function(t){return this.observers.includes(t)},t.prototype.notifyObservers=function(t){this.observers.slice(0).forEach((function(e){return e.update(t)}))},t}();e.Observable=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),s=n(1),a=n(0),l=n(8);n(10);var u=o.detectInputScrollWidthSupport(document);var c=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.emailStringListView=new l.EmailStringListView(e,n),i}return r(e,t),e.prototype.scrollToBottom=function(){this.html.scrollTop=this.html.scrollHeight},e.prototype.updateInputWidth=function(){u?(this.input.style.width="",this.input.value&&(this.input.style.width=this.input.scrollWidth+"px")):this.input.size=this.input.value.length||1},e.prototype.addEmailsFromString=function(t,e){var n=a.EmailString.parseEmailStringsFromString(t);n.length>0&&(this.getModel().addEmails(n),e&&(this.input.value=this.input.value.substr(t.length).replace(/^\s+/,""),this.input.setSelectionRange(0,0),this.updateInputWidth()))},e.prototype.handleInputBlurEvent=function(){this.addEmailsFromString(this.input.value,!0)},e.prototype.handleInputPasteEvent=function(t){this.addEmailsFromString(function(t){return t.clipboardData?t.clipboardData.getData("text/plain"):window.clipboardData.getData("Text")}(t),!1),this.scrollToBottom(),t.preventDefault()},e.prototype.handleInputKeyDownEvent=function(t){"Enter"===t.key&&this.addEmailsFromString(this.input.value,!0)},e.prototype.handleInputKeyUpEvent=function(t){if(","===t.key){var e=this.input.value.lastIndexOf(",");-1!==e&&this.addEmailsFromString(this.input.value.substr(0,e+1),!0)}},e.prototype.handleInputTextInputEvent=function(){this.updateInputWidth()},e.prototype.handleDragEvent=function(t){t.preventDefault()},e.prototype.handleDropEvent=function(t){this.addEmailsFromString(function(t){try{return t.dataTransfer.getData("Text")||t.dataTransfer.getData("text/plain")}catch(t){return""}}(t),!1),this.scrollToBottom(),t.preventDefault()},e.prototype.handleClickEvent=function(){event.target===this.getHtml()&&this.input.focus()},e.prototype.createHtml=function(){var t=this;return this.input=this.element({name:"input",classes:["emails-input__control"].concat(u?["emails-input__control-scroll"]:[]),listeners:{blur:function(){return t.handleInputBlurEvent()},paste:function(e){return t.handleInputPasteEvent(e)},keydown:function(e){return t.handleInputKeyDownEvent(e)},keyup:function(e){return t.handleInputKeyUpEvent(e)},input:function(){return t.handleInputTextInputEvent()}}}),u||(this.input.size=1),this.element({name:"div",classes:["emails-input"],children:[this.emailStringListView.create().getHtml(),this.input],listeners:{dragenter:function(e){return t.handleDragEvent(e)},dragover:function(e){return t.handleDragEvent(e)},drop:function(e){return t.handleDropEvent(e)},click:function(){return t.handleClickEvent()}}})},e}(s.View);e.EmailsInputView=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectInputScrollWidthSupport=function(t){var e=t.createElement("input");e.value="0000000000000000000000000000",e.style.width="1px",e.style.border="none",e.style.outline="none",document.body.appendChild(e);var n=e.scrollWidth>e.offsetWidth;return document.body.removeChild(e),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.element=function(t,e){var n=t.createElement(e.name);if(n.className=e.classes?e.classes.join(" "):"",n.textContent=e.text||"",e.role&&n.setAttribute("role",e.role),e.children&&e.children.forEach((function(t){return n.appendChild(t)})),e.listeners)for(var i in e.listeners)e.listeners.hasOwnProperty(i)&&n.addEventListener(i,e.listeners[i]);return n}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);n(9);var s=function(t){function e(e,n){return t.call(this,e,n)||this}return r(e,t),e.prototype.createEmailHtml=function(t){var e=this;return this.element({name:"span",classes:["email-string-list__email-block","email-string-list__email-block-"+(t.isValid()?"valid":"invalid")],children:[this.element({name:"span",classes:["email-string-list__email-label"],text:t.value}),this.element({name:"span",classes:["email-string-list__email-remove-button"],text:"Ã—",listeners:{click:function(n){return e.getModel().removeEmail(t)}}})]})},e.prototype.createHtml=function(){return this.element({name:"span",classes:["email-string-list"]})},e.prototype.update=function(e){var n=this;if("emails"===e||"*"===e){for(;this.getHtml().firstChild;)this.getHtml().removeChild(this.getHtml().firstChild);this.getModel().getEmails().forEach((function(t){return n.getHtml().appendChild(n.createEmailHtml(t))}))}t.prototype.update.call(this,e)},e}(o.View);e.EmailStringListView=s},function(t,e,n){},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);n(13);var r=document.getElementById("emails-count");r.textContent="2";var o=new i.EmailsInput(document.getElementById("email-input"),{emails:["bla@bla.com","invalid.com"],onChange:function(t){r.textContent=String(t.length)}}).create(),s=["bob","rob","john","steve","jane","anna"],a=["apple","facebook","google","linkedin"],l=["com","org","net","nl","ru","ua"];function u(t){return t[Math.round(Math.random()*(t.length-1))]}document.getElementById("add-email").addEventListener("click",(function(){o.addEmail(u(s)+"@"+u(a)+"."+u(l)),o.scrollToBottom()})),document.getElementById("get-emails-count").addEventListener("click",(function(){alert(o.getEmails().length+" emails entered!")}))},function(t,e,n){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL0VtYWlsU3RyaW5nLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L1ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VtYWlsc0lucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9FbWFpbFN0cmluZ0xpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL09ic2VydmFibGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcvRW1haWxzSW5wdXRWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L3N1cHBvcnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcvZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9FbWFpbFN0cmluZ0xpc3RWaWV3LnRzIiwid2VicGFjazovLy8uL3NhbXBsZXMvZGVmYXVsdC9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkVNQUlMX1JFR0VYUCIsIkVtYWlsU3RyaW5nIiwidGhpcyIsInBhcnNlRW1haWxTdHJpbmdzRnJvbVN0cmluZyIsImVtYWlsc1N0cmluZyIsInJlcGxhY2UiLCJzcGxpdCIsImZpbHRlciIsIml0ZW0iLCJsZW5ndGgiLCJtYXAiLCJpc1ZhbGlkIiwidGVzdCIsImVsZW1lbnRfMSIsIlZpZXciLCJvd25lckRvY3VtZW50IiwibW9kZWwiLCJlbGVtZW50Iiwib3B0aW9ucyIsImdldE1vZGVsIiwiZ2V0SHRtbCIsImh0bWwiLCJhZGRPYnNlcnZlciIsImNyZWF0ZUh0bWwiLCJ1cGRhdGUiLCJFbWFpbFN0cmluZ18xIiwiRW1haWxTdHJpbmdMaXN0XzEiLCJFbWFpbHNJbnB1dFZpZXdfMSIsIkVtYWlsc0lucHV0Iiwicm9vdCIsImVtYWlsc0xpc3QiLCJFbWFpbFN0cmluZ0xpc3QiLCJlbWFpbHMiLCJlbWFpbCIsImVtYWlsSW5wdXRWaWV3IiwiRW1haWxzSW5wdXRWaWV3Iiwib25FbWFpbHNMaXN0Q2hhbmdlIiwib25DaGFuZ2UiLCJnZXRFbWFpbHMiLCJzZXRFbWFpbHMiLCJhZGRFbWFpbCIsImFkZEVtYWlscyIsInNjcm9sbFRvQm90dG9tIiwiYXBwZW5kQ2hpbGQiLCJleHRlbmRTdGF0aWNzIiwiX19leHRlbmRzIiwiYiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJfXyIsImNvbnN0cnVjdG9yIiwiX3N1cGVyIiwiX3RoaXMiLCJub3RpZnlPYnNlcnZlcnMiLCJyZW1vdmVFbWFpbCIsImNvbmNhdCIsIk9ic2VydmFibGUiLCJvYnNlcnZlcnMiLCJvYnNlcnZlciIsInB1c2giLCJyZW1vdmVPYnNlcnZlciIsImhhc09ic2VydmVyIiwiaW5jbHVkZXMiLCJzbGljZSIsImZvckVhY2giLCJzdXBwb3J0XzEiLCJWaWV3XzEiLCJFbWFpbFN0cmluZ0xpc3RWaWV3XzEiLCJpbnB1dFNjcm9sbFdpZHRoU3VwcG9ydGVkIiwiZGV0ZWN0SW5wdXRTY3JvbGxXaWR0aFN1cHBvcnQiLCJkb2N1bWVudCIsImVtYWlsU3RyaW5nTGlzdFZpZXciLCJFbWFpbFN0cmluZ0xpc3RWaWV3Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwidXBkYXRlSW5wdXRXaWR0aCIsImlucHV0Iiwic3R5bGUiLCJ3aWR0aCIsInNjcm9sbFdpZHRoIiwic2l6ZSIsImFkZEVtYWlsc0Zyb21TdHJpbmciLCJyZXNldElucHV0Iiwic3Vic3RyIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJoYW5kbGVJbnB1dEJsdXJFdmVudCIsImhhbmRsZUlucHV0UGFzdGVFdmVudCIsImV2ZW50IiwiY2xpcGJvYXJkRGF0YSIsImdldERhdGEiLCJ3aW5kb3ciLCJnZXRDbGlwYm9hcmREYXRhIiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVJbnB1dEtleURvd25FdmVudCIsImhhbmRsZUlucHV0S2V5VXBFdmVudCIsImxhc3RDb21hSW5kZXgiLCJsYXN0SW5kZXhPZiIsImhhbmRsZUlucHV0VGV4dElucHV0RXZlbnQiLCJoYW5kbGVEcmFnRXZlbnQiLCJoYW5kbGVEcm9wRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJlcnJvciIsImdldERyb3BEYXRhIiwiaGFuZGxlQ2xpY2tFdmVudCIsInRhcmdldCIsImZvY3VzIiwiY2xhc3NlcyIsImxpc3RlbmVycyIsImJsdXIiLCJwYXN0ZSIsImtleWRvd24iLCJrZXl1cCIsImNoaWxkcmVuIiwiZHJhZ2VudGVyIiwiZHJhZ292ZXIiLCJkcm9wIiwiY2xpY2siLCJjcmVhdGVFbGVtZW50IiwiYm9yZGVyIiwib3V0bGluZSIsImJvZHkiLCJzdXBwb3J0ZWQiLCJvZmZzZXRXaWR0aCIsInJlbW92ZUNoaWxkIiwicmVzdWx0IiwiY2xhc3NOYW1lIiwiam9pbiIsInRleHRDb250ZW50IiwidGV4dCIsInJvbGUiLCJzZXRBdHRyaWJ1dGUiLCJjaGlsZCIsImxpc3RlbmVyTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjcmVhdGVFbWFpbEh0bWwiLCJmaXJzdENoaWxkIiwiRW1haWxzSW5wdXRfMSIsImVtYWlsc0NvdW50TGFiZWwiLCJnZXRFbGVtZW50QnlJZCIsImVtYWlsc0lucHV0IiwiU3RyaW5nIiwic2FtcGxlTmFtZXMiLCJzYW1wbGVTdWJkb21haW5zIiwic2FtcGxlUm9vdERvbWFpbnMiLCJwaWNrUmFuZG9tIiwibGlz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TyxNQUFPLE9BQVEsUUFBUyxPQUFRLFFBQ3REQyxFQUFtQixDQUFDLFFBQVMsV0FBWSxTQUFVLFlBQ25EQyxFQUFvQixDQUFDLE1BQU8sTUFBTyxNQUFPLEtBQU0sS0FBTSxNQUMxRCxTQUFTQyxFQUFXQyxHQUNoQixPQUFPQSxFQUFLQyxLQUFLQyxNQUFNRCxLQUFLRSxVQUFZSCxFQUFLekksT0FBUyxLQUUxRDhELFNBQVNvRSxlQUFlLGFBQWFMLGlCQUFpQixTQUFTLFdBQzNETSxFQUFZcEcsU0FBU3lHLEVBQVdILEdBQWUsSUFBTUcsRUFBV0YsR0FBb0IsSUFBTUUsRUFBV0QsSUFDckdKLEVBQVlsRyxvQkFFaEI2QixTQUFTb0UsZUFBZSxvQkFBb0JMLGlCQUFpQixTQUFTLFdBQ2xFZ0IsTUFBTVYsRUFBWXRHLFlBQVk3QixPQUFTLHdCIiwiZmlsZSI6ImRlZmF1bHQtc2FtcGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEyKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEVNQUlMX1JFR0VYUCA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xudmFyIEVtYWlsU3RyaW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVtYWlsU3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgRW1haWxTdHJpbmcucGFyc2VFbWFpbFN0cmluZ3NGcm9tU3RyaW5nID0gZnVuY3Rpb24gKGVtYWlsc1N0cmluZykge1xuICAgICAgICByZXR1cm4gZW1haWxzU3RyaW5nXG4gICAgICAgICAgICAucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG4gICAgICAgICAgICAuc3BsaXQoL1xccyosXFxzKi9nKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbS5sZW5ndGggPiAwOyB9KVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gbmV3IEVtYWlsU3RyaW5nKGl0ZW0pOyB9KTtcbiAgICB9O1xuICAgIEVtYWlsU3RyaW5nLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gRU1BSUxfUkVHRVhQLnRlc3QodGhpcy52YWx1ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gRW1haWxTdHJpbmc7XG59KCkpO1xuZXhwb3J0cy5FbWFpbFN0cmluZyA9IEVtYWlsU3RyaW5nO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgZWxlbWVudF8xID0gcmVxdWlyZShcIkAvdmlldy9lbGVtZW50XCIpO1xudmFyIFZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmlldyhvd25lckRvY3VtZW50LCBtb2RlbCkge1xuICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQgPSBvd25lckRvY3VtZW50O1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgfVxuICAgIFZpZXcucHJvdG90eXBlLmVsZW1lbnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZWxlbWVudF8xLmVsZW1lbnQodGhpcy5vd25lckRvY3VtZW50LCBvcHRpb25zKTtcbiAgICB9O1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2RlbDtcbiAgICB9O1xuICAgIFZpZXcucHJvdG90eXBlLmdldEh0bWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmh0bWw7XG4gICAgfTtcbiAgICBWaWV3LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubW9kZWwuYWRkT2JzZXJ2ZXIodGhpcyk7XG4gICAgICAgIHRoaXMuaHRtbCA9IHRoaXMuY3JlYXRlSHRtbCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZSgnKicpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFZpZXcucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgIH07XG4gICAgcmV0dXJuIFZpZXc7XG59KCkpO1xuZXhwb3J0cy5WaWV3ID0gVmlldztcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEVtYWlsU3RyaW5nXzEgPSByZXF1aXJlKFwiQC9tb2RlbC9FbWFpbFN0cmluZ1wiKTtcbnZhciBFbWFpbFN0cmluZ0xpc3RfMSA9IHJlcXVpcmUoXCJAL21vZGVsL0VtYWlsU3RyaW5nTGlzdFwiKTtcbnZhciBFbWFpbHNJbnB1dFZpZXdfMSA9IHJlcXVpcmUoXCJAL3ZpZXcvRW1haWxzSW5wdXRWaWV3XCIpO1xudmFyIEVtYWlsc0lucHV0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVtYWlsc0lucHV0KHJvb3QsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdDtcbiAgICAgICAgdGhpcy5lbWFpbHNMaXN0ID0gbmV3IEVtYWlsU3RyaW5nTGlzdF8xLkVtYWlsU3RyaW5nTGlzdCgob3B0aW9ucyAmJiBvcHRpb25zLmVtYWlscyB8fCBbXSkubWFwKGZ1bmN0aW9uIChlbWFpbCkgeyByZXR1cm4gbmV3IEVtYWlsU3RyaW5nXzEuRW1haWxTdHJpbmcoZW1haWwpOyB9KSk7XG4gICAgICAgIHRoaXMuZW1haWxJbnB1dFZpZXcgPSBuZXcgRW1haWxzSW5wdXRWaWV3XzEuRW1haWxzSW5wdXRWaWV3KHJvb3Qub3duZXJEb2N1bWVudCwgdGhpcy5lbWFpbHNMaXN0KTtcbiAgICAgICAgdGhpcy5vbkVtYWlsc0xpc3RDaGFuZ2UgPSBvcHRpb25zICYmIG9wdGlvbnMub25DaGFuZ2U7XG4gICAgfVxuICAgIEVtYWlsc0lucHV0LnByb3RvdHlwZS5nZXRFbWFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVtYWlsc0xpc3QuZ2V0RW1haWxzKCkubWFwKGZ1bmN0aW9uIChlbWFpbCkgeyByZXR1cm4gZW1haWwudmFsdWU7IH0pO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXQucHJvdG90eXBlLnNldEVtYWlscyA9IGZ1bmN0aW9uIChlbWFpbHMpIHtcbiAgICAgICAgdGhpcy5lbWFpbHNMaXN0LnNldEVtYWlscyhlbWFpbHMubWFwKGZ1bmN0aW9uIChlbWFpbCkgeyByZXR1cm4gbmV3IEVtYWlsU3RyaW5nXzEuRW1haWxTdHJpbmcoZW1haWwpOyB9KSk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dC5wcm90b3R5cGUuYWRkRW1haWwgPSBmdW5jdGlvbiAoZW1haWwpIHtcbiAgICAgICAgdGhpcy5lbWFpbHNMaXN0LmFkZEVtYWlscyhbbmV3IEVtYWlsU3RyaW5nXzEuRW1haWxTdHJpbmcoZW1haWwpXSk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dC5wcm90b3R5cGUuc2Nyb2xsVG9Cb3R0b20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZW1haWxJbnB1dFZpZXcuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZW1haWxzTGlzdC5hZGRPYnNlcnZlcih0aGlzKTtcbiAgICAgICAgdGhpcy5yb290LmFwcGVuZENoaWxkKHRoaXMuZW1haWxJbnB1dFZpZXcuY3JlYXRlKCkuZ2V0SHRtbCgpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ2VtYWlscycgJiYgdGhpcy5vbkVtYWlsc0xpc3RDaGFuZ2UpIHtcbiAgICAgICAgICAgIHRoaXMub25FbWFpbHNMaXN0Q2hhbmdlKHRoaXMuZ2V0RW1haWxzKCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRW1haWxzSW5wdXQ7XG59KCkpO1xuZXhwb3J0cy5FbWFpbHNJbnB1dCA9IEVtYWlsc0lucHV0O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKFwiQC9tb2RlbC9PYnNlcnZhYmxlXCIpO1xudmFyIEVtYWlsU3RyaW5nTGlzdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1haWxTdHJpbmdMaXN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtYWlsU3RyaW5nTGlzdChlbWFpbHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZW1haWxzID0gZW1haWxzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEVtYWlsU3RyaW5nTGlzdC5wcm90b3R5cGUuZ2V0RW1haWxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbWFpbHM7XG4gICAgfTtcbiAgICBFbWFpbFN0cmluZ0xpc3QucHJvdG90eXBlLnNldEVtYWlscyA9IGZ1bmN0aW9uIChlbWFpbHMpIHtcbiAgICAgICAgdGhpcy5lbWFpbHMgPSBlbWFpbHM7XG4gICAgICAgIHRoaXMubm90aWZ5T2JzZXJ2ZXJzKCdlbWFpbHMnKTtcbiAgICB9O1xuICAgIEVtYWlsU3RyaW5nTGlzdC5wcm90b3R5cGUucmVtb3ZlRW1haWwgPSBmdW5jdGlvbiAoZW1haWwpIHtcbiAgICAgICAgdGhpcy5zZXRFbWFpbHModGhpcy5lbWFpbHMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtICE9PSBlbWFpbDsgfSkpO1xuICAgIH07XG4gICAgRW1haWxTdHJpbmdMaXN0LnByb3RvdHlwZS5hZGRFbWFpbHMgPSBmdW5jdGlvbiAoZW1haWxzKSB7XG4gICAgICAgIHRoaXMuc2V0RW1haWxzKHRoaXMuZW1haWxzLmNvbmNhdChlbWFpbHMpKTtcbiAgICB9O1xuICAgIHJldHVybiBFbWFpbFN0cmluZ0xpc3Q7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkVtYWlsU3RyaW5nTGlzdCA9IEVtYWlsU3RyaW5nTGlzdDtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIE9ic2VydmFibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZSgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICB9XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuYWRkT2JzZXJ2ZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5yZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbSAhPT0gb2JzZXJ2ZXI7IH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuaGFzT2JzZXJ2ZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmluY2x1ZGVzKG9ic2VydmVyKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLm5vdGlmeU9ic2VydmVycyA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICB0aGlzLm9ic2VydmVycy5zbGljZSgwKS5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikgeyByZXR1cm4gb2JzZXJ2ZXIudXBkYXRlKHByb3BlcnR5KTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKSk7XG5leHBvcnRzLk9ic2VydmFibGUgPSBPYnNlcnZhYmxlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBzdXBwb3J0XzEgPSByZXF1aXJlKFwiQC92aWV3L3N1cHBvcnRcIik7XG52YXIgVmlld18xID0gcmVxdWlyZShcIkAvdmlldy9WaWV3XCIpO1xudmFyIEVtYWlsU3RyaW5nXzEgPSByZXF1aXJlKFwiQC9tb2RlbC9FbWFpbFN0cmluZ1wiKTtcbnZhciBFbWFpbFN0cmluZ0xpc3RWaWV3XzEgPSByZXF1aXJlKFwiQC92aWV3L0VtYWlsU3RyaW5nTGlzdFZpZXdcIik7XG5yZXF1aXJlKFwiQC92aWV3L0VtYWlsc0lucHV0Vmlldy5zY3NzXCIpO1xudmFyIGlucHV0U2Nyb2xsV2lkdGhTdXBwb3J0ZWQgPSBzdXBwb3J0XzEuZGV0ZWN0SW5wdXRTY3JvbGxXaWR0aFN1cHBvcnQoZG9jdW1lbnQpO1xuZnVuY3Rpb24gZ2V0Q2xpcGJvYXJkRGF0YShldmVudCkge1xuICAgIGlmIChldmVudC5jbGlwYm9hcmREYXRhKSB7XG4gICAgICAgIHJldHVybiBldmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdUZXh0Jyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RHJvcERhdGEoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ1RleHQnKSB8fCBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSUUgY2FuIHRocm93IGV4Y2VwdGlvbiBmb3IgJ3RleHQvcGxhaW4nIGFjY29yZGluZyB0byBzdGFjayBvdmVyZmxvd1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxudmFyIEVtYWlsc0lucHV0VmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1haWxzSW5wdXRWaWV3LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtYWlsc0lucHV0Vmlldyhvd25lckRvY3VtZW50LCBtb2RlbCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvd25lckRvY3VtZW50LCBtb2RlbCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZW1haWxTdHJpbmdMaXN0VmlldyA9IG5ldyBFbWFpbFN0cmluZ0xpc3RWaWV3XzEuRW1haWxTdHJpbmdMaXN0Vmlldyhvd25lckRvY3VtZW50LCBtb2RlbCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5zY3JvbGxUb0JvdHRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5odG1sLnNjcm9sbFRvcCA9IHRoaXMuaHRtbC5zY3JvbGxIZWlnaHQ7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLnVwZGF0ZUlucHV0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaW5wdXRTY3JvbGxXaWR0aFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5zaXplID0gdGhpcy5pbnB1dC52YWx1ZS5sZW5ndGggfHwgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zdHlsZS53aWR0aCA9IHRoaXMuaW5wdXQuc2Nyb2xsV2lkdGggKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmFkZEVtYWlsc0Zyb21TdHJpbmcgPSBmdW5jdGlvbiAoZW1haWxzU3RyaW5nLCByZXNldElucHV0KSB7XG4gICAgICAgIHZhciBlbWFpbHMgPSBFbWFpbFN0cmluZ18xLkVtYWlsU3RyaW5nLnBhcnNlRW1haWxTdHJpbmdzRnJvbVN0cmluZyhlbWFpbHNTdHJpbmcpO1xuICAgICAgICBpZiAoZW1haWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0TW9kZWwoKS5hZGRFbWFpbHMoZW1haWxzKTtcbiAgICAgICAgICAgIGlmIChyZXNldElucHV0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9IHRoaXMuaW5wdXQudmFsdWUuc3Vic3RyKGVtYWlsc1N0cmluZy5sZW5ndGgpLnJlcGxhY2UoL15cXHMrLywgJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dFdpZHRoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuaGFuZGxlSW5wdXRCbHVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYWRkRW1haWxzRnJvbVN0cmluZyh0aGlzLmlucHV0LnZhbHVlLCB0cnVlKTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuaGFuZGxlSW5wdXRQYXN0ZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuYWRkRW1haWxzRnJvbVN0cmluZyhnZXRDbGlwYm9hcmREYXRhKGV2ZW50KSwgZmFsc2UpO1xuICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmhhbmRsZUlucHV0S2V5RG93bkV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRW1haWxzRnJvbVN0cmluZyh0aGlzLmlucHV0LnZhbHVlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5oYW5kbGVJbnB1dEtleVVwRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJywnKSB7XG4gICAgICAgICAgICB2YXIgbGFzdENvbWFJbmRleCA9IHRoaXMuaW5wdXQudmFsdWUubGFzdEluZGV4T2YoJywnKTtcbiAgICAgICAgICAgIGlmIChsYXN0Q29tYUluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRW1haWxzRnJvbVN0cmluZyh0aGlzLmlucHV0LnZhbHVlLnN1YnN0cigwLCBsYXN0Q29tYUluZGV4ICsgMSksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmhhbmRsZUlucHV0VGV4dElucHV0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXRXaWR0aCgpO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuaGFuZGxlRHJvcEV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuYWRkRW1haWxzRnJvbVN0cmluZyhnZXREcm9wRGF0YShldmVudCksIGZhbHNlKTtcbiAgICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5oYW5kbGVDbGlja0V2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLmdldEh0bWwoKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmNyZWF0ZUh0bWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLmVsZW1lbnQoe1xuICAgICAgICAgICAgbmFtZTogJ2lucHV0JyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnZW1haWxzLWlucHV0X19jb250cm9sJ10uY29uY2F0KGlucHV0U2Nyb2xsV2lkdGhTdXBwb3J0ZWQgPyBbJ2VtYWlscy1pbnB1dF9fY29udHJvbC1zY3JvbGwnXSA6IFtdKSxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUlucHV0Qmx1ckV2ZW50KCk7IH0sXG4gICAgICAgICAgICAgICAgcGFzdGU6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlSW5wdXRQYXN0ZUV2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUlucHV0S2V5RG93bkV2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVJbnB1dEtleVVwRXZlbnQoZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVJbnB1dFRleHRJbnB1dEV2ZW50KCk7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghaW5wdXRTY3JvbGxXaWR0aFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5zaXplID0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50KHtcbiAgICAgICAgICAgIG5hbWU6ICdkaXYnLFxuICAgICAgICAgICAgY2xhc3NlczogWydlbWFpbHMtaW5wdXQnXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbdGhpcy5lbWFpbFN0cmluZ0xpc3RWaWV3LmNyZWF0ZSgpLmdldEh0bWwoKSwgdGhpcy5pbnB1dF0sXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICBkcmFnZW50ZXI6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlRHJhZ0V2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBkcmFnb3ZlcjogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVEcmFnRXZlbnQoZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgIGRyb3A6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlRHJvcEV2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlQ2xpY2tFdmVudCgpOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEVtYWlsc0lucHV0Vmlldztcbn0oVmlld18xLlZpZXcpKTtcbmV4cG9ydHMuRW1haWxzSW5wdXRWaWV3ID0gRW1haWxzSW5wdXRWaWV3O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5mdW5jdGlvbiBkZXRlY3RJbnB1dFNjcm9sbFdpZHRoU3VwcG9ydChvd25lckRvY3VtZW50KSB7XG4gICAgdmFyIGlucHV0ID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0LnZhbHVlID0gJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnO1xuICAgIGlucHV0LnN0eWxlLndpZHRoID0gJzFweCc7XG4gICAgaW5wdXQuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgIGlucHV0LnN0eWxlLm91dGxpbmUgPSAnbm9uZSc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgdmFyIHN1cHBvcnRlZCA9IGlucHV0LnNjcm9sbFdpZHRoID4gaW5wdXQub2Zmc2V0V2lkdGg7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpbnB1dCk7XG4gICAgcmV0dXJuIHN1cHBvcnRlZDtcbn1cbmV4cG9ydHMuZGV0ZWN0SW5wdXRTY3JvbGxXaWR0aFN1cHBvcnQgPSBkZXRlY3RJbnB1dFNjcm9sbFdpZHRoU3VwcG9ydDtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZnVuY3Rpb24gZWxlbWVudChvd25lckRvY3VtZW50LCBvcHRpb25zKSB7XG4gICAgdmFyIHJlc3VsdCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChvcHRpb25zLm5hbWUpO1xuICAgIHJlc3VsdC5jbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzZXMgPyBvcHRpb25zLmNsYXNzZXMuam9pbignICcpIDogJyc7XG4gICAgcmVzdWx0LnRleHRDb250ZW50ID0gb3B0aW9ucy50ZXh0IHx8ICcnO1xuICAgIGlmIChvcHRpb25zLnJvbGUpIHtcbiAgICAgICAgcmVzdWx0LnNldEF0dHJpYnV0ZSgncm9sZScsIG9wdGlvbnMucm9sZSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNoaWxkcmVuKSB7XG4gICAgICAgIG9wdGlvbnMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHsgcmV0dXJuIHJlc3VsdC5hcHBlbmRDaGlsZChjaGlsZCk7IH0pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5saXN0ZW5lcnMpIHtcbiAgICAgICAgZm9yICh2YXIgbGlzdGVuZXJOYW1lIGluIG9wdGlvbnMubGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5saXN0ZW5lcnMuaGFzT3duUHJvcGVydHkobGlzdGVuZXJOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5hZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyTmFtZSwgb3B0aW9ucy5saXN0ZW5lcnNbbGlzdGVuZXJOYW1lXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydHMuZWxlbWVudCA9IGVsZW1lbnQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFZpZXdfMSA9IHJlcXVpcmUoXCJAL3ZpZXcvVmlld1wiKTtcbnJlcXVpcmUoXCJAL3ZpZXcvRW1haWxTdHJpbmdMaXN0Vmlldy5zY3NzXCIpO1xudmFyIEVtYWlsU3RyaW5nTGlzdFZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtYWlsU3RyaW5nTGlzdFZpZXcsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRW1haWxTdHJpbmdMaXN0Vmlldyhvd25lckRvY3VtZW50LCBlbWFpbHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG93bmVyRG9jdW1lbnQsIGVtYWlscykgfHwgdGhpcztcbiAgICB9XG4gICAgRW1haWxTdHJpbmdMaXN0Vmlldy5wcm90b3R5cGUuY3JlYXRlRW1haWxIdG1sID0gZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQoe1xuICAgICAgICAgICAgbmFtZTogJ3NwYW4nLFxuICAgICAgICAgICAgY2xhc3NlczogW1xuICAgICAgICAgICAgICAgICdlbWFpbC1zdHJpbmctbGlzdF9fZW1haWwtYmxvY2snLFxuICAgICAgICAgICAgICAgIFwiZW1haWwtc3RyaW5nLWxpc3RfX2VtYWlsLWJsb2NrLVwiICsgKGVtYWlsLmlzVmFsaWQoKSA/ICd2YWxpZCcgOiAnaW52YWxpZCcpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsnZW1haWwtc3RyaW5nLWxpc3RfX2VtYWlsLWxhYmVsJ10sXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGVtYWlsLnZhbHVlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbJ2VtYWlsLXN0cmluZy1saXN0X19lbWFpbC1yZW1vdmUtYnV0dG9uJ10sXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICfDlycsXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5nZXRNb2RlbCgpLnJlbW92ZUVtYWlsKGVtYWlsKTsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBFbWFpbFN0cmluZ0xpc3RWaWV3LnByb3RvdHlwZS5jcmVhdGVIdG1sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50KHtcbiAgICAgICAgICAgIG5hbWU6ICdzcGFuJyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnZW1haWwtc3RyaW5nLWxpc3QnXVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEVtYWlsU3RyaW5nTGlzdFZpZXcucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAocHJvcGVydHkgPT09ICdlbWFpbHMnIHx8IHByb3BlcnR5ID09PSAnKicpIHtcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmdldEh0bWwoKS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRIdG1sKCkucmVtb3ZlQ2hpbGQodGhpcy5nZXRIdG1sKCkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldE1vZGVsKCkuZ2V0RW1haWxzKCkuZm9yRWFjaChmdW5jdGlvbiAoZW1haWwpIHsgcmV0dXJuIF90aGlzLmdldEh0bWwoKS5hcHBlbmRDaGlsZChfdGhpcy5jcmVhdGVFbWFpbEh0bWwoZW1haWwpKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLCBwcm9wZXJ0eSk7XG4gICAgfTtcbiAgICByZXR1cm4gRW1haWxTdHJpbmdMaXN0Vmlldztcbn0oVmlld18xLlZpZXcpKTtcbmV4cG9ydHMuRW1haWxTdHJpbmdMaXN0VmlldyA9IEVtYWlsU3RyaW5nTGlzdFZpZXc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFbWFpbHNJbnB1dF8xID0gcmVxdWlyZShcIkAvRW1haWxzSW5wdXRcIik7XG5yZXF1aXJlKFwiLi9pbmRleC5zY3NzXCIpO1xudmFyIGVtYWlsc0NvdW50TGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWxzLWNvdW50Jyk7XG5lbWFpbHNDb3VudExhYmVsLnRleHRDb250ZW50ID0gJzInO1xudmFyIGVtYWlsc0lucHV0ID0gbmV3IEVtYWlsc0lucHV0XzEuRW1haWxzSW5wdXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsLWlucHV0JyksIHtcbiAgICBlbWFpbHM6IFsnYmxhQGJsYS5jb20nLCAnaW52YWxpZC5jb20nXSxcbiAgICBvbkNoYW5nZTogZnVuY3Rpb24gKGVtYWlscykge1xuICAgICAgICBlbWFpbHNDb3VudExhYmVsLnRleHRDb250ZW50ID0gU3RyaW5nKGVtYWlscy5sZW5ndGgpO1xuICAgIH1cbn0pXG4gICAgLmNyZWF0ZSgpO1xudmFyIHNhbXBsZU5hbWVzID0gWydib2InLCAncm9iJywgJ2pvaG4nLCAnc3RldmUnLCAnamFuZScsICdhbm5hJ107XG52YXIgc2FtcGxlU3ViZG9tYWlucyA9IFsnYXBwbGUnLCAnZmFjZWJvb2snLCAnZ29vZ2xlJywgJ2xpbmtlZGluJ107XG52YXIgc2FtcGxlUm9vdERvbWFpbnMgPSBbJ2NvbScsICdvcmcnLCAnbmV0JywgJ25sJywgJ3J1JywgJ3VhJ107XG5mdW5jdGlvbiBwaWNrUmFuZG9tKGxpc3QpIHtcbiAgICByZXR1cm4gbGlzdFtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAobGlzdC5sZW5ndGggLSAxKSldO1xufVxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1lbWFpbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGVtYWlsc0lucHV0LmFkZEVtYWlsKHBpY2tSYW5kb20oc2FtcGxlTmFtZXMpICsgXCJAXCIgKyBwaWNrUmFuZG9tKHNhbXBsZVN1YmRvbWFpbnMpICsgXCIuXCIgKyBwaWNrUmFuZG9tKHNhbXBsZVJvb3REb21haW5zKSk7XG4gICAgZW1haWxzSW5wdXQuc2Nyb2xsVG9Cb3R0b20oKTtcbn0pO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dldC1lbWFpbHMtY291bnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBhbGVydChlbWFpbHNJbnB1dC5nZXRFbWFpbHMoKS5sZW5ndGggKyBcIiBlbWFpbHMgZW50ZXJlZCFcIik7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=