!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=function(){function t(t){this.value=t}return t.parseEmailStringsFromString=function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g).filter((function(t){return t.length>0})).map((function(e){return new t(e)}))},t.prototype.isValid=function(){return i.test(this.value)},t}();e.EmailString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.ownerDocument=t,this.model=e}return t.prototype.getModel=function(){return this.model},t.prototype.getOwnerDocument=function(){return this.ownerDocument},t.prototype.getHtml=function(){return this.html},t.prototype.extractDataTransferData=function(t){try{return t.getData("Text")||t.getData("text/plain")}catch(t){return""}},t.prototype.extractClipboardText=function(t){return this.extractDataTransferData(t.clipboardData||this.ownerDocument.getClipBoardData())},t.prototype.extractDroppedText=function(t){return this.extractDataTransferData(t.dataTransfer)},t.prototype.createElement=function(t){return this.ownerDocument.createElement(t)},t.prototype.create=function(){return this.model.addObserver(this),this.html=this.createHtml(),this.update("*"),this},t.prototype.update=function(t){},t}();e.View=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(5),s=n(6),a=function(){function t(t,e){this.root=t,this.emailsList=new r.EmailStringList((e&&e.emails||[]).map((function(t){return new i.EmailString(t)}))),this.emailInputView=new s.EmailsInputView(new o.ViewDocument(t.ownerDocument),this.emailsList),this.onEmailsListChange=e&&e.onChange}return t.prototype.getEmails=function(){return this.emailsList.getEmails().map((function(t){return t.value}))},t.prototype.setEmails=function(t){this.emailsList.setEmails(t.map((function(t){return new i.EmailString(t)})))},t.prototype.addEmail=function(t){this.emailsList.addEmails([new i.EmailString(t)])},t.prototype.scrollToBottom=function(){this.emailInputView.scrollToBottom()},t.prototype.create=function(){return this.emailsList.addObserver(this),this.root.appendChild(this.emailInputView.create().getHtml()),this},t.prototype.update=function(t){"emails"===t&&this.onEmailsListChange&&this.onEmailsListChange(this.getEmails())},t}();e.EmailsInput=a},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.emails=e,n}return r(e,t),e.prototype.getEmails=function(){return this.emails},e.prototype.setEmails=function(t){this.emails=t,this.notifyObservers("emails")},e.prototype.removeEmail=function(t){this.setEmails(this.emails.filter((function(e){return e!==t})))},e.prototype.addEmails=function(t){this.setEmails(this.emails.concat(t))},e}(n(4).Observable);e.EmailStringList=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.observers=[]}return t.prototype.addObserver=function(t){this.observers.push(t)},t.prototype.removeObserver=function(t){this.observers=this.observers.filter((function(e){return e!==t}))},t.prototype.hasObserver=function(t){return this.observers.includes(t)},t.prototype.notifyObservers=function(t){this.observers.slice(0).forEach((function(e){return e.update(t)}))},t}();e.Observable=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.domDocument=t}return t.prototype.getClipBoardData=function(){return this.domDocument.defaultView.clipboardData},t.prototype.isInputScrollWidthSupported=function(){if(void 0===this.inputScrollWidthSupported){var t=this.createElement({name:"input"});t.value="0000000000000000000000000000",t.style.width="1px",t.style.border="none",t.style.outline="none",this.domDocument.body.appendChild(t),this.inputScrollWidthSupported=t.scrollWidth>t.offsetWidth,this.domDocument.body.removeChild(t)}return this.inputScrollWidthSupported},t.prototype.createElement=function(t){var e=this.domDocument.createElement(t.name);if(e.className=t.classes?t.classes.join(" "):"",e.textContent=t.text||"",t.children&&t.children.forEach((function(t){return e.appendChild(t)})),t.listeners)for(var n in t.listeners)t.listeners.hasOwnProperty(n)&&e.addEventListener(n,t.listeners[n]);return e},t}();e.ViewDocument=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),s=n(0),a=n(7);n(9);var u=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.emailStringListView=new a.EmailStringListView(e,n),i}return r(e,t),e.prototype.scrollToBottom=function(){this.html.scrollTop=this.html.scrollHeight},e.prototype.updateInputWidth=function(){this.input.style.width="",this.input.value&&(this.getOwnerDocument().isInputScrollWidthSupported()?this.input.style.width=this.input.scrollWidth+1+"px":(this.inputSizer.textContent=this.input.value,this.input.style.width=this.inputSizer.scrollWidth+"px"))},e.prototype.addEmailsFromString=function(t,e){var n=s.EmailString.parseEmailStringsFromString(t);n.length>0&&(this.getModel().addEmails(n),e&&(this.input.value=this.input.value.substr(t.length).replace(/^\s+/,""),this.input.setSelectionRange(0,0),this.updateInputWidth()))},e.prototype.handleInputBlurEvent=function(){this.addEmailsFromString(this.input.value,!0)},e.prototype.handleInputPasteEvent=function(t){this.addEmailsFromString(this.extractClipboardText(t),!1),this.scrollToBottom(),t.preventDefault()},e.prototype.handleInputKeyDownEvent=function(t){"Enter"===t.key&&this.addEmailsFromString(this.input.value,!0)},e.prototype.handleInputKeyUpEvent=function(t){if(","===t.key){var e=this.input.value.lastIndexOf(",");-1!==e&&this.addEmailsFromString(this.input.value.substr(0,e+1),!0)}},e.prototype.handleInputTextInputEvent=function(){this.updateInputWidth()},e.prototype.handleDragEvent=function(t){t.preventDefault()},e.prototype.handleDropEvent=function(t){this.addEmailsFromString(this.extractDroppedText(t),!1),this.scrollToBottom(),t.preventDefault()},e.prototype.handleClickEvent=function(t){t.target===this.getHtml()&&this.input.focus()},e.prototype.createHtml=function(){var t=this;return this.input=this.createElement({name:"input",classes:["emails-input__control"],listeners:{blur:function(){return t.handleInputBlurEvent()},paste:function(e){return t.handleInputPasteEvent(e)},keydown:function(e){return t.handleInputKeyDownEvent(e)},keyup:function(e){return t.handleInputKeyUpEvent(e)},input:function(){return t.handleInputTextInputEvent()}}}),this.inputSizer=this.createElement({name:"span",classes:["emails-input__control-sizer"]}),this.createElement({name:"div",classes:["emails-input"],children:[this.emailStringListView.create().getHtml(),this.inputSizer,this.input],listeners:{dragenter:function(e){return t.handleDragEvent(e)},dragover:function(e){return t.handleDragEvent(e)},drop:function(e){return t.handleDropEvent(e)},click:function(e){return t.handleClickEvent(e)}}})},e}(o.View);e.EmailsInputView=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);n(8);var s=function(t){function e(e,n){return t.call(this,e,n)||this}return r(e,t),e.prototype.createEmailHtml=function(t){var e=this;return this.createElement({name:"span",classes:["email-string-list__email-block","email-string-list__email-block-"+(t.isValid()?"valid":"invalid")],children:[this.createElement({name:"span",classes:["email-string-list__email-label"],text:t.value}),this.createElement({name:"span",classes:["email-string-list__email-remove-button"],text:"Ã—",listeners:{click:function(){return e.getModel().removeEmail(t)}}})]})},e.prototype.createHtml=function(){return this.createElement({name:"span",classes:["email-string-list"]})},e.prototype.update=function(e){var n=this;if("emails"===e||"*"===e){for(;this.getHtml().firstChild;)this.getHtml().removeChild(this.getHtml().firstChild);this.getModel().getEmails().forEach((function(t){return n.getHtml().appendChild(n.createEmailHtml(t))}))}t.prototype.update.call(this,e)},e}(o.View);e.EmailStringListView=s},function(t,e,n){},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);n(12);var r=document.getElementById("emails-count");r.textContent="2";var o=new i.EmailsInput(document.getElementById("email-input"),{emails:["bla@bla.com","invalid.com"],onChange:function(t){r.textContent=String(t.length)}}).create(),s=["bob","rob","john","steve","jane","anna"],a=["apple","facebook","google","linkedin"],u=["com","org","net","nl","ru","ua"];function l(t){return t[Math.round(Math.random()*(t.length-1))]}document.getElementById("add-email").addEventListener("click",(function(){o.addEmail(l(s)+"@"+l(a)+"."+l(u)),o.scrollToBottom()})),document.getElementById("get-emails-count").addEventListener("click",(function(){alert(o.getEmails().length+" emails entered!")}))},function(t,e,n){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL0VtYWlsU3RyaW5nLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L1ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VtYWlsc0lucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9FbWFpbFN0cmluZ0xpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL09ic2VydmFibGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcvVmlld0RvY3VtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L0VtYWlsc0lucHV0Vmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9FbWFpbFN0cmluZ0xpc3RWaWV3LnRzIiwid2VicGFjazovLy8uL3NhbXBsZXMvZGVmYXVsdC9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkVNQUlMX1JFR0VYUCIsIkVtYWlsU3RyaW5nIiwidGhpcyIsInBhcnNlRW1haWxTdHJpbmdzRnJvbVN0cmluZyIsImVtYWlsc1N0cmluZyIsInJlcGxhY2UiLCJzcGxpdCIsImZpbHRlciIsIml0ZW0iLCJsZW5ndGgiLCJtYXAiLCJpc1ZhbGlkIiwidGVzdCIsIlZpZXciLCJvd25lckRvY3VtZW50IiwibW9kZWwiLCJnZXRNb2RlbCIsImdldE93bmVyRG9jdW1lbnQiLCJnZXRIdG1sIiwiaHRtbCIsImV4dHJhY3REYXRhVHJhbnNmZXJEYXRhIiwiZGF0YVRyYW5zZmVyIiwiZ2V0RGF0YSIsImVycm9yIiwiZXh0cmFjdENsaXBib2FyZFRleHQiLCJldmVudCIsImNsaXBib2FyZERhdGEiLCJnZXRDbGlwQm9hcmREYXRhIiwiZXh0cmFjdERyb3BwZWRUZXh0IiwiY3JlYXRlRWxlbWVudCIsIm9wdGlvbnMiLCJhZGRPYnNlcnZlciIsImNyZWF0ZUh0bWwiLCJ1cGRhdGUiLCJFbWFpbFN0cmluZ18xIiwiRW1haWxTdHJpbmdMaXN0XzEiLCJWaWV3RG9jdW1lbnRfMSIsIkVtYWlsc0lucHV0Vmlld18xIiwiRW1haWxzSW5wdXQiLCJyb290IiwiZW1haWxzTGlzdCIsIkVtYWlsU3RyaW5nTGlzdCIsImVtYWlscyIsImVtYWlsIiwiZW1haWxJbnB1dFZpZXciLCJFbWFpbHNJbnB1dFZpZXciLCJWaWV3RG9jdW1lbnQiLCJvbkVtYWlsc0xpc3RDaGFuZ2UiLCJvbkNoYW5nZSIsImdldEVtYWlscyIsInNldEVtYWlscyIsImFkZEVtYWlsIiwiYWRkRW1haWxzIiwic2Nyb2xsVG9Cb3R0b20iLCJhcHBlbmRDaGlsZCIsImV4dGVuZFN0YXRpY3MiLCJfX2V4dGVuZHMiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIl9fIiwiY29uc3RydWN0b3IiLCJfc3VwZXIiLCJfdGhpcyIsIm5vdGlmeU9ic2VydmVycyIsInJlbW92ZUVtYWlsIiwiY29uY2F0IiwiT2JzZXJ2YWJsZSIsIm9ic2VydmVycyIsIm9ic2VydmVyIiwicHVzaCIsInJlbW92ZU9ic2VydmVyIiwiaGFzT2JzZXJ2ZXIiLCJpbmNsdWRlcyIsInNsaWNlIiwiZm9yRWFjaCIsImRvbURvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJpc0lucHV0U2Nyb2xsV2lkdGhTdXBwb3J0ZWQiLCJ1bmRlZmluZWQiLCJpbnB1dFNjcm9sbFdpZHRoU3VwcG9ydGVkIiwiaW5wdXQiLCJzdHlsZSIsIndpZHRoIiwiYm9yZGVyIiwib3V0bGluZSIsImJvZHkiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJyZXN1bHQiLCJjbGFzc05hbWUiLCJjbGFzc2VzIiwiam9pbiIsInRleHRDb250ZW50IiwidGV4dCIsImNoaWxkcmVuIiwiY2hpbGQiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lck5hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiVmlld18xIiwiRW1haWxTdHJpbmdMaXN0Vmlld18xIiwiZW1haWxTdHJpbmdMaXN0VmlldyIsIkVtYWlsU3RyaW5nTGlzdFZpZXciLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJ1cGRhdGVJbnB1dFdpZHRoIiwiaW5wdXRTaXplciIsImFkZEVtYWlsc0Zyb21TdHJpbmciLCJyZXNldElucHV0Iiwic3Vic3RyIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJoYW5kbGVJbnB1dEJsdXJFdmVudCIsImhhbmRsZUlucHV0UGFzdGVFdmVudCIsInByZXZlbnREZWZhdWx0IiwiaGFuZGxlSW5wdXRLZXlEb3duRXZlbnQiLCJoYW5kbGVJbnB1dEtleVVwRXZlbnQiLCJsYXN0Q29tYUluZGV4IiwibGFzdEluZGV4T2YiLCJoYW5kbGVJbnB1dFRleHRJbnB1dEV2ZW50IiwiaGFuZGxlRHJhZ0V2ZW50IiwiaGFuZGxlRHJvcEV2ZW50IiwiaGFuZGxlQ2xpY2tFdmVudCIsInRhcmdldCIsImZvY3VzIiwiYmx1ciIsInBhc3RlIiwia2V5ZG93biIsImtleXVwIiwiZHJhZ2VudGVyIiwiZHJhZ292ZXIiLCJkcm9wIiwiY2xpY2siLCJjcmVhdGVFbWFpbEh0bWwiLCJmaXJzdENoaWxkIiwiRW1haWxzSW5wdXRfMSIsImVtYWlsc0NvdW50TGFiZWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZW1haWxzSW5wdXQiLCJTdHJpbmciLCJzYW1wbGVOYW1lcyIsInNhbXBsZVN1YmRvbWFpbnMiLCJzYW1wbGVSb290RG9tYWlucyIsInBpY2tSYW5kb20iLCJsaXN0IiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FB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QyxZQUFZVSxFQUFNdUUsZ0JBQWdCNUYsT0FFcEhvQixFQUFPbkUsVUFBVXFDLE9BQU85RCxLQUFLK0IsS0FBTVAsSUFFaEM4RyxFQTlDNkIsQ0ErQ3RDSCxFQUFPekYsTUFDVC9DLEVBQVEySSxvQkFBc0JBLEcsa0VDaEU5Qi9ILE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxJQUN0RCxJQUFJd0osRUFBZ0IsRUFBUSxHQUM1QixFQUFRLElBQ1IsSUFBSUMsRUFBbUJDLFNBQVNDLGVBQWUsZ0JBQy9DRixFQUFpQjNDLFlBQWMsSUFDL0IsSUFBSThDLEVBQWMsSUFBSUosRUFBY25HLFlBQVlxRyxTQUFTQyxlQUFlLGVBQWdCLENBQ3BGbEcsT0FBUSxDQUFDLGNBQWUsZUFDeEJNLFNBQVUsU0FBVU4sR0FDaEJnRyxFQUFpQjNDLFlBQWMrQyxPQUFPcEcsRUFBT2pDLFdBR2hEbkIsU0FDRHlKLEVBQWMsQ0FBQyxNQUFPLE1BQU8sT0FBUSxRQUFTLE9BQVEsUUFDdERDLEVBQW1CLENBQUMsUUFBUyxXQUFZLFNBQVUsWUFDbkRDLEVBQW9CLENBQUMsTUFBTyxNQUFPLE1BQU8sS0FBTSxLQUFNLE1BQzFELFNBQVNDLEVBQVdDLEdBQ2hCLE9BQU9BLEVBQUtDLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVlILEVBQUsxSSxPQUFTLEtBRTFEa0ksU0FBU0MsZUFBZSxhQUFhdkMsaUJBQWlCLFNBQVMsV0FDM0R3QyxFQUFZMUYsU0FBUytGLEVBQVdILEdBQWUsSUFBTUcsRUFBV0YsR0FBb0IsSUFBTUUsRUFBV0QsSUFDckdKLEVBQVl4RixvQkFFaEJzRixTQUFTQyxlQUFlLG9CQUFvQnZDLGlCQUFpQixTQUFTLFdBQ2xFa0QsTUFBTVYsRUFBWTVGLFlBQVl4QyxPQUFTLHdCIiwiZmlsZSI6ImRlZmF1bHQtc2FtcGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDExKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEVNQUlMX1JFR0VYUCA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xudmFyIEVtYWlsU3RyaW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVtYWlsU3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgRW1haWxTdHJpbmcucGFyc2VFbWFpbFN0cmluZ3NGcm9tU3RyaW5nID0gZnVuY3Rpb24gKGVtYWlsc1N0cmluZykge1xuICAgICAgICByZXR1cm4gZW1haWxzU3RyaW5nXG4gICAgICAgICAgICAucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG4gICAgICAgICAgICAuc3BsaXQoL1xccyosXFxzKi9nKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbS5sZW5ndGggPiAwOyB9KVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gbmV3IEVtYWlsU3RyaW5nKGl0ZW0pOyB9KTtcbiAgICB9O1xuICAgIEVtYWlsU3RyaW5nLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gRU1BSUxfUkVHRVhQLnRlc3QodGhpcy52YWx1ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gRW1haWxTdHJpbmc7XG59KCkpO1xuZXhwb3J0cy5FbWFpbFN0cmluZyA9IEVtYWlsU3RyaW5nO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBWaWV3KG93bmVyRG9jdW1lbnQsIG1vZGVsKSB7XG4gICAgICAgIHRoaXMub3duZXJEb2N1bWVudCA9IG93bmVyRG9jdW1lbnQ7XG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICB9XG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsO1xuICAgIH07XG4gICAgVmlldy5wcm90b3R5cGUuZ2V0T3duZXJEb2N1bWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXJEb2N1bWVudDtcbiAgICB9O1xuICAgIFZpZXcucHJvdG90eXBlLmdldEh0bWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmh0bWw7XG4gICAgfTtcbiAgICBWaWV3LnByb3RvdHlwZS5leHRyYWN0RGF0YVRyYW5zZmVyRGF0YSA9IGZ1bmN0aW9uIChkYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhVHJhbnNmZXIuZ2V0RGF0YSgnVGV4dCcpIHx8IGRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBJRSBjYW4gdGhyb3cgZXhjZXB0aW9uIGZvciAndGV4dC9wbGFpbicgYWNjb3JkaW5nIHRvIHN0YWNrIG92ZXJmbG93XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFZpZXcucHJvdG90eXBlLmV4dHJhY3RDbGlwYm9hcmRUZXh0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3REYXRhVHJhbnNmZXJEYXRhKGV2ZW50LmNsaXBib2FyZERhdGEgfHwgdGhpcy5vd25lckRvY3VtZW50LmdldENsaXBCb2FyZERhdGEoKSk7XG4gICAgfTtcbiAgICBWaWV3LnByb3RvdHlwZS5leHRyYWN0RHJvcHBlZFRleHQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdERhdGFUcmFuc2ZlckRhdGEoZXZlbnQuZGF0YVRyYW5zZmVyKTtcbiAgICB9O1xuICAgIFZpZXcucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgfTtcbiAgICBWaWV3LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubW9kZWwuYWRkT2JzZXJ2ZXIodGhpcyk7XG4gICAgICAgIHRoaXMuaHRtbCA9IHRoaXMuY3JlYXRlSHRtbCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZSgnKicpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFZpZXcucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgIH07XG4gICAgcmV0dXJuIFZpZXc7XG59KCkpO1xuZXhwb3J0cy5WaWV3ID0gVmlldztcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEVtYWlsU3RyaW5nXzEgPSByZXF1aXJlKFwiQC9tb2RlbC9FbWFpbFN0cmluZ1wiKTtcbnZhciBFbWFpbFN0cmluZ0xpc3RfMSA9IHJlcXVpcmUoXCJAL21vZGVsL0VtYWlsU3RyaW5nTGlzdFwiKTtcbnZhciBWaWV3RG9jdW1lbnRfMSA9IHJlcXVpcmUoXCJAL3ZpZXcvVmlld0RvY3VtZW50XCIpO1xudmFyIEVtYWlsc0lucHV0Vmlld18xID0gcmVxdWlyZShcIkAvdmlldy9FbWFpbHNJbnB1dFZpZXdcIik7XG52YXIgRW1haWxzSW5wdXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRW1haWxzSW5wdXQocm9vdCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLnJvb3QgPSByb290O1xuICAgICAgICB0aGlzLmVtYWlsc0xpc3QgPSBuZXcgRW1haWxTdHJpbmdMaXN0XzEuRW1haWxTdHJpbmdMaXN0KChvcHRpb25zICYmIG9wdGlvbnMuZW1haWxzIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGVtYWlsKSB7IHJldHVybiBuZXcgRW1haWxTdHJpbmdfMS5FbWFpbFN0cmluZyhlbWFpbCk7IH0pKTtcbiAgICAgICAgdGhpcy5lbWFpbElucHV0VmlldyA9IG5ldyBFbWFpbHNJbnB1dFZpZXdfMS5FbWFpbHNJbnB1dFZpZXcobmV3IFZpZXdEb2N1bWVudF8xLlZpZXdEb2N1bWVudChyb290Lm93bmVyRG9jdW1lbnQpLCB0aGlzLmVtYWlsc0xpc3QpO1xuICAgICAgICB0aGlzLm9uRW1haWxzTGlzdENoYW5nZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5vbkNoYW5nZTtcbiAgICB9XG4gICAgRW1haWxzSW5wdXQucHJvdG90eXBlLmdldEVtYWlscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW1haWxzTGlzdC5nZXRFbWFpbHMoKS5tYXAoZnVuY3Rpb24gKGVtYWlsKSB7IHJldHVybiBlbWFpbC52YWx1ZTsgfSk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dC5wcm90b3R5cGUuc2V0RW1haWxzID0gZnVuY3Rpb24gKGVtYWlscykge1xuICAgICAgICB0aGlzLmVtYWlsc0xpc3Quc2V0RW1haWxzKGVtYWlscy5tYXAoZnVuY3Rpb24gKGVtYWlsKSB7IHJldHVybiBuZXcgRW1haWxTdHJpbmdfMS5FbWFpbFN0cmluZyhlbWFpbCk7IH0pKTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0LnByb3RvdHlwZS5hZGRFbWFpbCA9IGZ1bmN0aW9uIChlbWFpbCkge1xuICAgICAgICB0aGlzLmVtYWlsc0xpc3QuYWRkRW1haWxzKFtuZXcgRW1haWxTdHJpbmdfMS5FbWFpbFN0cmluZyhlbWFpbCldKTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0LnByb3RvdHlwZS5zY3JvbGxUb0JvdHRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbWFpbElucHV0Vmlldy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXQucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbWFpbHNMaXN0LmFkZE9ic2VydmVyKHRoaXMpO1xuICAgICAgICB0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy5lbWFpbElucHV0Vmlldy5jcmVhdGUoKS5nZXRIdG1sKCkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgaWYgKHByb3BlcnR5ID09PSAnZW1haWxzJyAmJiB0aGlzLm9uRW1haWxzTGlzdENoYW5nZSkge1xuICAgICAgICAgICAgdGhpcy5vbkVtYWlsc0xpc3RDaGFuZ2UodGhpcy5nZXRFbWFpbHMoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBFbWFpbHNJbnB1dDtcbn0oKSk7XG5leHBvcnRzLkVtYWlsc0lucHV0ID0gRW1haWxzSW5wdXQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoXCJAL21vZGVsL09ic2VydmFibGVcIik7XG52YXIgRW1haWxTdHJpbmdMaXN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFbWFpbFN0cmluZ0xpc3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRW1haWxTdHJpbmdMaXN0KGVtYWlscykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5lbWFpbHMgPSBlbWFpbHM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgRW1haWxTdHJpbmdMaXN0LnByb3RvdHlwZS5nZXRFbWFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVtYWlscztcbiAgICB9O1xuICAgIEVtYWlsU3RyaW5nTGlzdC5wcm90b3R5cGUuc2V0RW1haWxzID0gZnVuY3Rpb24gKGVtYWlscykge1xuICAgICAgICB0aGlzLmVtYWlscyA9IGVtYWlscztcbiAgICAgICAgdGhpcy5ub3RpZnlPYnNlcnZlcnMoJ2VtYWlscycpO1xuICAgIH07XG4gICAgRW1haWxTdHJpbmdMaXN0LnByb3RvdHlwZS5yZW1vdmVFbWFpbCA9IGZ1bmN0aW9uIChlbWFpbCkge1xuICAgICAgICB0aGlzLnNldEVtYWlscyh0aGlzLmVtYWlscy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0gIT09IGVtYWlsOyB9KSk7XG4gICAgfTtcbiAgICBFbWFpbFN0cmluZ0xpc3QucHJvdG90eXBlLmFkZEVtYWlscyA9IGZ1bmN0aW9uIChlbWFpbHMpIHtcbiAgICAgICAgdGhpcy5zZXRFbWFpbHModGhpcy5lbWFpbHMuY29uY2F0KGVtYWlscykpO1xuICAgIH07XG4gICAgcmV0dXJuIEVtYWlsU3RyaW5nTGlzdDtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRW1haWxTdHJpbmdMaXN0ID0gRW1haWxTdHJpbmdMaXN0O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgT2JzZXJ2YWJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKCkge1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuICAgIH1cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5hZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnJlbW92ZU9ic2VydmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtICE9PSBvYnNlcnZlcjsgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5oYXNPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlcnMuaW5jbHVkZXMob2JzZXJ2ZXIpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUubm90aWZ5T2JzZXJ2ZXJzID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnNsaWNlKDApLmZvckVhY2goZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBvYnNlcnZlci51cGRhdGUocHJvcGVydHkpOyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlO1xufSgpKTtcbmV4cG9ydHMuT2JzZXJ2YWJsZSA9IE9ic2VydmFibGU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWaWV3RG9jdW1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmlld0RvY3VtZW50KGRvbURvY3VtZW50KSB7XG4gICAgICAgIHRoaXMuZG9tRG9jdW1lbnQgPSBkb21Eb2N1bWVudDtcbiAgICB9XG4gICAgVmlld0RvY3VtZW50LnByb3RvdHlwZS5nZXRDbGlwQm9hcmREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb21Eb2N1bWVudC5kZWZhdWx0Vmlldy5jbGlwYm9hcmREYXRhO1xuICAgIH07XG4gICAgVmlld0RvY3VtZW50LnByb3RvdHlwZS5pc0lucHV0U2Nyb2xsV2lkdGhTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlucHV0U2Nyb2xsV2lkdGhTdXBwb3J0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5jcmVhdGVFbGVtZW50KHsgbmFtZTogJ2lucHV0JyB9KTtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnO1xuICAgICAgICAgICAgaW5wdXQuc3R5bGUud2lkdGggPSAnMXB4JztcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLm91dGxpbmUgPSAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLmRvbURvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFNjcm9sbFdpZHRoU3VwcG9ydGVkID0gaW5wdXQuc2Nyb2xsV2lkdGggPiBpbnB1dC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuZG9tRG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRTY3JvbGxXaWR0aFN1cHBvcnRlZDtcbiAgICB9O1xuICAgIFZpZXdEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRvbURvY3VtZW50LmNyZWF0ZUVsZW1lbnQob3B0aW9ucy5uYW1lKTtcbiAgICAgICAgcmVzdWx0LmNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NlcyA/IG9wdGlvbnMuY2xhc3Nlcy5qb2luKCcgJykgOiAnJztcbiAgICAgICAgcmVzdWx0LnRleHRDb250ZW50ID0gb3B0aW9ucy50ZXh0IHx8ICcnO1xuICAgICAgICBpZiAob3B0aW9ucy5jaGlsZHJlbikge1xuICAgICAgICAgICAgb3B0aW9ucy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gcmVzdWx0LmFwcGVuZENoaWxkKGNoaWxkKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBsaXN0ZW5lck5hbWUgaW4gb3B0aW9ucy5saXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5saXN0ZW5lcnMuaGFzT3duUHJvcGVydHkobGlzdGVuZXJOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuYWRkRXZlbnRMaXN0ZW5lcihsaXN0ZW5lck5hbWUsIG9wdGlvbnMubGlzdGVuZXJzW2xpc3RlbmVyTmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgcmV0dXJuIFZpZXdEb2N1bWVudDtcbn0oKSk7XG5leHBvcnRzLlZpZXdEb2N1bWVudCA9IFZpZXdEb2N1bWVudDtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmlld18xID0gcmVxdWlyZShcIkAvdmlldy9WaWV3XCIpO1xudmFyIEVtYWlsU3RyaW5nXzEgPSByZXF1aXJlKFwiQC9tb2RlbC9FbWFpbFN0cmluZ1wiKTtcbnZhciBFbWFpbFN0cmluZ0xpc3RWaWV3XzEgPSByZXF1aXJlKFwiQC92aWV3L0VtYWlsU3RyaW5nTGlzdFZpZXdcIik7XG5yZXF1aXJlKFwiQC92aWV3L0VtYWlsc0lucHV0Vmlldy5zY3NzXCIpO1xudmFyIEVtYWlsc0lucHV0VmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1haWxzSW5wdXRWaWV3LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtYWlsc0lucHV0Vmlldyhvd25lckRvY3VtZW50LCBtb2RlbCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvd25lckRvY3VtZW50LCBtb2RlbCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZW1haWxTdHJpbmdMaXN0VmlldyA9IG5ldyBFbWFpbFN0cmluZ0xpc3RWaWV3XzEuRW1haWxTdHJpbmdMaXN0Vmlldyhvd25lckRvY3VtZW50LCBtb2RlbCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5zY3JvbGxUb0JvdHRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5odG1sLnNjcm9sbFRvcCA9IHRoaXMuaHRtbC5zY3JvbGxIZWlnaHQ7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLnVwZGF0ZUlucHV0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5wdXQuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgaWYgKHRoaXMuaW5wdXQudmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldE93bmVyRG9jdW1lbnQoKS5pc0lucHV0U2Nyb2xsV2lkdGhTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgICAgIC8vIEEgbWFnaWMgbnVtYmVyIGlzIHVzZWQgYXMgYSBsYXN0IHJlc29ydCB0byBzb2x2ZSBzb21lIHRpbnkgcm91bmRpbmcgZXJyb3IgaW4gc2Nyb2xsV2lkdGggaW4gQ2hyb21lXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zdHlsZS53aWR0aCA9ICh0aGlzLmlucHV0LnNjcm9sbFdpZHRoICsgMSkgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFNpemVyLnRleHRDb250ZW50ID0gdGhpcy5pbnB1dC52YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0LnN0eWxlLndpZHRoID0gdGhpcy5pbnB1dFNpemVyLnNjcm9sbFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5hZGRFbWFpbHNGcm9tU3RyaW5nID0gZnVuY3Rpb24gKGVtYWlsc1N0cmluZywgcmVzZXRJbnB1dCkge1xuICAgICAgICB2YXIgZW1haWxzID0gRW1haWxTdHJpbmdfMS5FbWFpbFN0cmluZy5wYXJzZUVtYWlsU3RyaW5nc0Zyb21TdHJpbmcoZW1haWxzU3RyaW5nKTtcbiAgICAgICAgaWYgKGVtYWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmdldE1vZGVsKCkuYWRkRW1haWxzKGVtYWlscyk7XG4gICAgICAgICAgICBpZiAocmVzZXRJbnB1dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQudmFsdWUgPSB0aGlzLmlucHV0LnZhbHVlLnN1YnN0cihlbWFpbHNTdHJpbmcubGVuZ3RoKS5yZXBsYWNlKC9eXFxzKy8sICcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXRXaWR0aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmhhbmRsZUlucHV0Qmx1ckV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFkZEVtYWlsc0Zyb21TdHJpbmcodGhpcy5pbnB1dC52YWx1ZSwgdHJ1ZSk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmhhbmRsZUlucHV0UGFzdGVFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLmFkZEVtYWlsc0Zyb21TdHJpbmcodGhpcy5leHRyYWN0Q2xpcGJvYXJkVGV4dChldmVudCksIGZhbHNlKTtcbiAgICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5oYW5kbGVJbnB1dEtleURvd25FdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEVtYWlsc0Zyb21TdHJpbmcodGhpcy5pbnB1dC52YWx1ZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuaGFuZGxlSW5wdXRLZXlVcEV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICcsJykge1xuICAgICAgICAgICAgdmFyIGxhc3RDb21hSW5kZXggPSB0aGlzLmlucHV0LnZhbHVlLmxhc3RJbmRleE9mKCcsJyk7XG4gICAgICAgICAgICBpZiAobGFzdENvbWFJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEVtYWlsc0Zyb21TdHJpbmcodGhpcy5pbnB1dC52YWx1ZS5zdWJzdHIoMCwgbGFzdENvbWFJbmRleCArIDEpLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRW1haWxzSW5wdXRWaWV3LnByb3RvdHlwZS5oYW5kbGVJbnB1dFRleHRJbnB1dEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0V2lkdGgoKTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmhhbmRsZURyb3BFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLmFkZEVtYWlsc0Zyb21TdHJpbmcodGhpcy5leHRyYWN0RHJvcHBlZFRleHQoZXZlbnQpLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIEVtYWlsc0lucHV0Vmlldy5wcm90b3R5cGUuaGFuZGxlQ2xpY2tFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLmdldEh0bWwoKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWFpbHNJbnB1dFZpZXcucHJvdG90eXBlLmNyZWF0ZUh0bWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgbmFtZTogJ2lucHV0JyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnZW1haWxzLWlucHV0X19jb250cm9sJ10sXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5oYW5kbGVJbnB1dEJsdXJFdmVudCgpOyB9LFxuICAgICAgICAgICAgICAgIHBhc3RlOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUlucHV0UGFzdGVFdmVudChldmVudCk7IH0sXG4gICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVJbnB1dEtleURvd25FdmVudChldmVudCk7IH0sXG4gICAgICAgICAgICAgICAga2V5dXA6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlSW5wdXRLZXlVcEV2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlSW5wdXRUZXh0SW5wdXRFdmVudCgpOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmlucHV0U2l6ZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgbmFtZTogJ3NwYW4nLFxuICAgICAgICAgICAgY2xhc3NlczogWydlbWFpbHMtaW5wdXRfX2NvbnRyb2wtc2l6ZXInXVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICBuYW1lOiAnZGl2JyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnZW1haWxzLWlucHV0J10sXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHRoaXMuZW1haWxTdHJpbmdMaXN0Vmlldy5jcmVhdGUoKS5nZXRIdG1sKCksXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFNpemVyLFxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICBkcmFnZW50ZXI6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlRHJhZ0V2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBkcmFnb3ZlcjogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVEcmFnRXZlbnQoZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgIGRyb3A6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaGFuZGxlRHJvcEV2ZW50KGV2ZW50KTsgfSxcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5oYW5kbGVDbGlja0V2ZW50KGV2ZW50KTsgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBFbWFpbHNJbnB1dFZpZXc7XG59KFZpZXdfMS5WaWV3KSk7XG5leHBvcnRzLkVtYWlsc0lucHV0VmlldyA9IEVtYWlsc0lucHV0VmlldztcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmlld18xID0gcmVxdWlyZShcIkAvdmlldy9WaWV3XCIpO1xucmVxdWlyZShcIkAvdmlldy9FbWFpbFN0cmluZ0xpc3RWaWV3LnNjc3NcIik7XG52YXIgRW1haWxTdHJpbmdMaXN0VmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1haWxTdHJpbmdMaXN0VmlldywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbWFpbFN0cmluZ0xpc3RWaWV3KG93bmVyRG9jdW1lbnQsIGVtYWlscykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgb3duZXJEb2N1bWVudCwgZW1haWxzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBFbWFpbFN0cmluZ0xpc3RWaWV3LnByb3RvdHlwZS5jcmVhdGVFbWFpbEh0bWwgPSBmdW5jdGlvbiAoZW1haWwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICBuYW1lOiAnc3BhbicsXG4gICAgICAgICAgICBjbGFzc2VzOiBbXG4gICAgICAgICAgICAgICAgJ2VtYWlsLXN0cmluZy1saXN0X19lbWFpbC1ibG9jaycsXG4gICAgICAgICAgICAgICAgXCJlbWFpbC1zdHJpbmctbGlzdF9fZW1haWwtYmxvY2stXCIgKyAoZW1haWwuaXNWYWxpZCgpID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJylcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWydlbWFpbC1zdHJpbmctbGlzdF9fZW1haWwtbGFiZWwnXSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZW1haWwudmFsdWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsnZW1haWwtc3RyaW5nLWxpc3RfX2VtYWlsLXJlbW92ZS1idXR0b24nXSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ8OXJyxcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5nZXRNb2RlbCgpLnJlbW92ZUVtYWlsKGVtYWlsKTsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBFbWFpbFN0cmluZ0xpc3RWaWV3LnByb3RvdHlwZS5jcmVhdGVIdG1sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgIG5hbWU6ICdzcGFuJyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnZW1haWwtc3RyaW5nLWxpc3QnXVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEVtYWlsU3RyaW5nTGlzdFZpZXcucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAocHJvcGVydHkgPT09ICdlbWFpbHMnIHx8IHByb3BlcnR5ID09PSAnKicpIHtcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmdldEh0bWwoKS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRIdG1sKCkucmVtb3ZlQ2hpbGQodGhpcy5nZXRIdG1sKCkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldE1vZGVsKCkuZ2V0RW1haWxzKCkuZm9yRWFjaChmdW5jdGlvbiAoZW1haWwpIHsgcmV0dXJuIF90aGlzLmdldEh0bWwoKS5hcHBlbmRDaGlsZChfdGhpcy5jcmVhdGVFbWFpbEh0bWwoZW1haWwpKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLCBwcm9wZXJ0eSk7XG4gICAgfTtcbiAgICByZXR1cm4gRW1haWxTdHJpbmdMaXN0Vmlldztcbn0oVmlld18xLlZpZXcpKTtcbmV4cG9ydHMuRW1haWxTdHJpbmdMaXN0VmlldyA9IEVtYWlsU3RyaW5nTGlzdFZpZXc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBFbWFpbHNJbnB1dF8xID0gcmVxdWlyZShcIkAvRW1haWxzSW5wdXRcIik7XG5yZXF1aXJlKFwiLi9pbmRleC5zY3NzXCIpO1xudmFyIGVtYWlsc0NvdW50TGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWxzLWNvdW50Jyk7XG5lbWFpbHNDb3VudExhYmVsLnRleHRDb250ZW50ID0gJzInO1xudmFyIGVtYWlsc0lucHV0ID0gbmV3IEVtYWlsc0lucHV0XzEuRW1haWxzSW5wdXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsLWlucHV0JyksIHtcbiAgICBlbWFpbHM6IFsnYmxhQGJsYS5jb20nLCAnaW52YWxpZC5jb20nXSxcbiAgICBvbkNoYW5nZTogZnVuY3Rpb24gKGVtYWlscykge1xuICAgICAgICBlbWFpbHNDb3VudExhYmVsLnRleHRDb250ZW50ID0gU3RyaW5nKGVtYWlscy5sZW5ndGgpO1xuICAgIH1cbn0pXG4gICAgLmNyZWF0ZSgpO1xudmFyIHNhbXBsZU5hbWVzID0gWydib2InLCAncm9iJywgJ2pvaG4nLCAnc3RldmUnLCAnamFuZScsICdhbm5hJ107XG52YXIgc2FtcGxlU3ViZG9tYWlucyA9IFsnYXBwbGUnLCAnZmFjZWJvb2snLCAnZ29vZ2xlJywgJ2xpbmtlZGluJ107XG52YXIgc2FtcGxlUm9vdERvbWFpbnMgPSBbJ2NvbScsICdvcmcnLCAnbmV0JywgJ25sJywgJ3J1JywgJ3VhJ107XG5mdW5jdGlvbiBwaWNrUmFuZG9tKGxpc3QpIHtcbiAgICByZXR1cm4gbGlzdFtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAobGlzdC5sZW5ndGggLSAxKSldO1xufVxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1lbWFpbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGVtYWlsc0lucHV0LmFkZEVtYWlsKHBpY2tSYW5kb20oc2FtcGxlTmFtZXMpICsgXCJAXCIgKyBwaWNrUmFuZG9tKHNhbXBsZVN1YmRvbWFpbnMpICsgXCIuXCIgKyBwaWNrUmFuZG9tKHNhbXBsZVJvb3REb21haW5zKSk7XG4gICAgZW1haWxzSW5wdXQuc2Nyb2xsVG9Cb3R0b20oKTtcbn0pO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dldC1lbWFpbHMtY291bnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBhbGVydChlbWFpbHNJbnB1dC5nZXRFbWFpbHMoKS5sZW5ndGggKyBcIiBlbWFpbHMgZW50ZXJlZCFcIik7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=